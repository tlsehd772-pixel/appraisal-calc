import streamlit as st
import datetime
from streamlit_option_menu import option_menu

# ------------------------------------------------------------------------------
# ğŸ¨ [Global Style] ë³¼ë“œì²´(êµµì€ ê¸€ì”¨) ê°•ì œ ì ìš© ë° í…Œì´ë¸” ìŠ¤íƒ€ì¼ë§
# ------------------------------------------------------------------------------
st.markdown("""
    <style>
    /* 1. ëª¨ë“  íƒœê·¸ì˜ ë³¼ë“œì²´ ì„¤ì •ì„ ìµœìš°ì„ ìœ¼ë¡œ ê°•ì œí•¨ */
    strong, b, h1, h2, h3, h4, h5, h6 {
        font-weight: 900 !important;
        color: #000000 !important; /* ì™„ì „ ê²€ì • */
    }
    
    /* 2. ë”°ì˜´í‘œ(')ë‚˜ ìŒë”°ì˜´í‘œ(")ê°€ í¬í•¨ëœ ë³¼ë“œì²´ê°€ ì–‡ê²Œ ë‚˜ì˜¤ëŠ” í˜„ìƒ í•´ê²° */
    div[data-testid="stMarkdownContainer"] p strong,
    div[data-testid="stMarkdownContainer"] p b {
        font-weight: 900 !important;
        -webkit-text-stroke: 0.5px black; /* ê¸€ì í…Œë‘ë¦¬ë¥¼ ì¤˜ì„œ ë” ë‘ê»ê²Œ */
    }

    /* 3. í‘œ(Table) ì•ˆì—ì„œì˜ ë³¼ë“œì²´ ë° ì¤„ë°”ê¿ˆ ì²˜ë¦¬ */
    th, td {
        white-space: pre-wrap !important;
        vertical-align: top !important;
    }
    
    /* 4. íƒ­(Tab) ìŠ¤íƒ€ì¼ */
    button[data-baseweb="tab"] {
        font-size: 16px !important;
        font-weight: 700 !important;
    }
    </style>
""", unsafe_allow_html=True)

# --- í˜ì´ì§€ ê¸°ë³¸ ì„¤ì • ---
st.set_page_config(page_title="ê°ì •í‰ê°€ ì‹¤ë¬´/ì´ë¡  ê³„ì‚°ê¸°", layout="wide")

# --- ìŠ¤íƒ€ì¼ë§ (ê°€ë…ì„± í–¥ìƒ) ---
st.markdown("""
    <style>
    .big-font { font-size:20px !important; font-weight: bold; }
    .info-box { background-color: #e8f4f8; padding: 15px; border-radius: 10px; border-left: 5px solid #0078d7; }
    .warning-box { background-color: #fff3cd; padding: 15px; border-radius: 10px; border-left: 5px solid #ffc107; }
    </style>
    """, unsafe_allow_html=True)

st.title("ğŸ§® ê°ì •í‰ê°€ì‚¬ ìˆ˜í—˜/ì‹¤ë¬´ í†µí•© ê³„ì‚°ê¸°")
st.markdown("ìˆ˜í—˜ìƒ: ì‹ í˜„ë™ | ëª©í‘œ: ê°ì •í‰ê°€ì‚¬ í•©ê²©")
st.markdown("---")

# --- ì‚¬ì´ë“œë°”: í‰ê°€ ë°©ì‹ ì„ íƒ ---
with st.sidebar:
    menu = option_menu(
    "í‰ê°€ ëŒ€ìƒì„ ì„ íƒí•˜ì„¸ìš”",
    [
        "ğŸ  í™ˆ / í‰ê°€ ê°€ì´ë“œ (ë¶„ë¥˜í‘œ)",
        "ğŸ“‹ ì‚°ì • ìš”ì¸ ë° ê³ ë ¤ì‚¬í•­ ê°€ì´ë“œ",
        "ğŸ“œ ê´€ë ¨ ë²•ë ¹ (ê°ì •í‰ê°€ë²•/ê°ì¹™)",
        "ğŸ“Š ìš”ì¸ ë¹„êµ/ì‚°ì • (ê²©ì°¨ìœ¨)",   # ğŸ‘ˆ ìƒˆë¡œ ì¶”ê°€ë¨ (ê¸°ë³¸ í™”ë©´)
        "í† ì§€ (ê³µì‹œì§€ê°€ê¸°ì¤€ë²•)", 
        "ê±´ë¬¼ (ì›ê°€ë²•)", 
        "í† ì§€ê±´ë¬¼ ì¼ê´„/êµ¬ë¶„ (ê±°ë˜ì‚¬ë¡€ë¹„êµë²•)",
        "ìˆ˜ìµì„± ë¶€ë™ì‚° (ìˆ˜ìµí™˜ì›ë²•)",
        "íˆ¬ìíƒ€ë‹¹ì„±/ê°€ì¹˜ (í• ì¸í˜„ê¸ˆìˆ˜ì§€ë¶„ì„ë²• DCF)",
        "ì„ëŒ€ë£Œ (ì ì‚°ë²•)",
        "ì„ëŒ€ë£Œ (ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•)",
        "í† ì§€/ê±´ë¬¼ ê°€ì¹˜ ë¶„ë¦¬ (ì”ì—¬ë²• & íˆ¬ìê²°í•©ë²•)",
        "ê³µê³µì‚¬ì—… ë³´ìƒ (ë³´ìƒí‰ê°€)",
        "ì¬ê°œë°œ/ì¬ê±´ì¶• (ì •ë¹„ì‚¬ì—…í‰ê°€)"
    ],
        icons=[
            'house',           # í™ˆ
            'clipboard-check', # ì‚°ì •ìš”ì¸
            'bar-chart-steps', # ğŸ‘ˆ ìƒˆë¡œ ì¶”ê°€ë¨! (ê²©ì°¨ìœ¨ ì•„ì´ì½˜) 
            'geo-alt',         # í† ì§€
            'building',        # ê±´ë¬¼
            'layers',          # ì¼ê´„/êµ¬ë¶„
            'graph-up-arrow',  # ìˆ˜ìµì„±
            'calculator',      # DCF
            'receipt',         # ì ì‚°ë²•
            'journal-text',    # ì„ëŒ€ì‚¬ë¡€
            'pie-chart',       # ì”ì—¬ë²•
            'cash-stack',      # ë³´ìƒ
            'hammer',          # ì¬ê°œë°œ
            'book-half'        # ë²•ë ¹
        ],
        menu_icon="cast",      # ë©”ë‰´ ìƒë‹¨ ì•„ì´ì½˜
        default_index=0,
        styles={
            "container": {"padding": "5!important", "background-color": "#fafafa"},
            "icon": {"color": "orange", "font-size": "25px"}, 
            "nav-link": {"font-size": "16px", "text-align": "left", "margin":"0px", "--hover-color": "#eee"},
            "nav-link-selected": {"background-color": "#02ab21"},
        }
    )

# ==============================================================================
# 0. í™ˆ / í‰ê°€ ê°€ì´ë“œ (Dashboard)
# ==============================================================================
if menu == "ğŸ  í™ˆ / í‰ê°€ ê°€ì´ë“œ (ë¶„ë¥˜í‘œ)":
    st.header("ğŸ‘‹ ê°ì •í‰ê°€ì‚¬ ì‹¤ë¬´ ê°€ì´ë“œ")
    st.markdown("### ğŸ’¡ ë¬´ì—‡ì„ í‰ê°€í•˜ì‹œë‚˜ìš”? (ê°ì •í‰ê°€ê·œì¹™ ì œ14ì¡°~25ì¡°)")
    st.info("ë¬¼ê±´ì˜ ì¢…ë¥˜ì— ë”°ë¼ ì ìš©í•´ì•¼ í•  **ì£¼ëœ í‰ê°€ë°©ë²•**ì´ ë²•ìœ¼ë¡œ ì •í•´ì ¸ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ í‘œë¥¼ ë³´ê³  ì ì ˆí•œ ë©”ë‰´ë¥¼ ì„ íƒí•˜ì„¸ìš”.")

    # íƒ­ìœ¼ë¡œ ë³´ê¸° í¸í•˜ê²Œ êµ¬ë¶„
    tab1, tab2, tab3, tab4 = st.tabs(["ğŸ—ï¸ ìœ í˜•ìì‚° (í† ì§€/ê±´ë¬¼)", "ğŸš— ë™ì‚°/ê¸°íƒ€ìì‚°", "ğŸ’¼ ê¶Œë¦¬/ê¸°ì—…ê°€ì¹˜", "âš–ï¸ ëª©ì ë³„ ë¹„êµ (ë‹´ë³´/ë³´ìƒ/ì •ë¹„)"])

    with tab1:
        st.subheader("í† ì§€ ë° ê±´ë¬¼ í‰ê°€")
        st.markdown("""
        | í‰ê°€ ëŒ€ìƒ | ì£¼ëœ í‰ê°€ë°©ë²• (ì›ì¹™) | **ê°ê°€ìˆ˜ì • (ì£¼ë°©ë²•)** | **í•©ë¦¬ì„± ê²€í†  (ë¶€ë°©ë²•)** | ë©”ë‰´ ì„ íƒ |
        | :--- | :--- | :--- | :--- | :--- |
        | **í† ì§€** | **ê³µì‹œì§€ê°€ê¸°ì¤€ë²•** | - | ê±°ë˜ì‚¬ë¡€ë¹„êµë²• (ê·¸ë°–ì˜ìš”ì¸) | ğŸ‘‰ `í† ì§€ (ê³µì‹œì§€ê°€ê¸°ì¤€ë²•)` |
        | **ê±´ë¬¼** | **ì›ê°€ë²•** | **ì •ì•¡ë²•** (ë‚´ìš©ì—°ìˆ˜ë²•) | **ê´€ì°°ê°ê°€ë²•** | ğŸ‘‰ `ê±´ë¬¼ (ì›ê°€ë²•)` |
        | **ì§‘í•©ê±´ë¬¼** | **ê±°ë˜ì‚¬ë¡€ë¹„êµë²•** | - | ì›ê°€ë²• (ì¸µë³„/í˜¸ë³„íš¨ìš©) | ğŸ‘‰ `ì¼ê´„/êµ¬ë¶„ (ê±°ë˜ì‚¬ë¡€)` |
        | **ê³¼ìˆ˜ì›** | **ê±°ë˜ì‚¬ë¡€ë¹„êµë²•** | - | ì›ê°€ë²• (ìˆ˜ëª© ê°€ê²©) | ğŸ‘‰ `ì¼ê´„/êµ¬ë¶„ (ê±°ë˜ì‚¬ë¡€)` |
        """)
        st.warning("âš ï¸ **ì£¼ì˜:** í† ì§€ë„ **ì ì •í•œ ì‹¤ê±°ë˜ê°€**ê°€ ìˆë‹¤ë©´ ê±°ë˜ì‚¬ë¡€ë¹„êµë²•ì„ ì ìš©í•  ìˆ˜ ìˆìŒ.")
        st.info("ğŸ’¡ **ì•”ê¸° Tip:** ê±´ë¬¼ì€ ë‚´ìš©ì—°ìˆ˜ ë™ì•ˆ ê°€ì¹˜ê°€ ì¼ì •í•˜ê²Œ ë–¨ì–´ì§„ë‹¤ê³  ê°€ì •í•˜ëŠ” **ì •ì•¡ë²•**ì´ ì›ì¹™ì´ì ì‹¤ë¬´ ê´€í–‰ì…ë‹ˆë‹¤.")
        st.info("""
        ğŸ’¡ **ì‹¤ë¬´ Point (ê±´ë¬¼ ê°ê°€):** ì´ë¡ ìƒ ê±´ë¬¼ì€ 'ì •ì•¡ë²•'ì„ ì ìš©í•˜ì§€ë§Œ, ì‹¤ì œ ê´€ë¦¬ ìƒíƒœë‚˜ ê°œë³´ìˆ˜ ì—¬ë¶€ë¥¼ ë°˜ì˜í•˜ê¸° ìœ„í•´ ë°˜ë“œì‹œ **ê´€ì°°ê°ê°€ë²•**ì„ ë³‘ìš©í•˜ì—¬ ê°ê°€ì•¡ì„ ì¡°ì •(í•©ë¦¬ì„± ê²€í† )í•´ì•¼ í•©ë‹ˆë‹¤.
        """)

    with tab2:
        st.subheader("ë™ì‚° ë° ê¸°íƒ€ìì‚°")
        st.markdown("""
        | í‰ê°€ ëŒ€ìƒ | ì£¼ëœ í‰ê°€ë°©ë²• (ì›ì¹™) | **ê°ê°€ìˆ˜ì • (ì£¼ë°©ë²•)** | **í•©ë¦¬ì„± ê²€í†  (ë¶€ë°©ë²•)** | ë©”ë‰´ ì„ íƒ |
        | :--- | :--- | :--- | :--- | :--- |
        | **ê±´ì„¤ê¸°ê³„** | **ì›ê°€ë²•** | **ì •ë¥ ë²•** | **ê´€ì°°ê°ê°€ë²•** | ğŸ‘‰ `ê±´ë¬¼ (ì›ê°€ë²•)` |
        | **ì„ ë°•** | **ì›ê°€ë²•** | **ì •ì•¡ë²•** (ì„ ì²´) | **ê´€ì°°ê°ê°€ë²•** | ğŸ‘‰ `ê±´ë¬¼ (ì›ê°€ë²•)` |
        | **í•­ê³µê¸°** | **ì›ê°€ë²•** | **ì •ì•¡ë²•** | **ê´€ì°°ê°ê°€ë²•** | ğŸ‘‰ `ê±´ë¬¼ (ì›ê°€ë²•)` |
        | **ìë™ì°¨** | **ê±°ë˜ì‚¬ë¡€ë¹„êµë²•** | - | ì›ê°€ë²• (ì°¸ê³ ) | ğŸ‘‰ `ì¼ê´„/êµ¬ë¶„ (ê±°ë˜ì‚¬ë¡€)` |
        | **ê¸°ê³„ê¸°êµ¬** | **ì›ê°€ë²•** | **ì •ë¥ ë²•** | **ê´€ì°°ê°ê°€ë²•** | ğŸ‘‰ `ê±´ë¬¼ (ì›ê°€ë²•)` |
        """)
        st.warning("âš ï¸ **ì‹œí—˜ í¬ì¸íŠ¸:** ë‚´ìš©ì—°ìˆ˜ë²•(ìˆ˜í•™ì  ê³„ì‚°)ë§Œìœ¼ë¡œëŠ” ê°œë³„ì ì¸ ìƒíƒœë¥¼ ë°˜ì˜ ëª»í•˜ë¯€ë¡œ, ì‹¤ì§€ì¡°ì‚¬ë¥¼ í†µí•œ **ê´€ì°°ê°ê°€ë²• ë³‘ìš©**ì´ í•„ìˆ˜ì ì…ë‹ˆë‹¤.")
        st.caption("â€» **ê¿€íŒ:** ìë™ì°¨ëŠ” ê±°ë˜ì‚¬ë¡€ë¹„êµë²•ì´ì§€ë§Œ, ê±´ì„¤ê¸°ê³„ëŠ” ì›ê°€ë²•ì…ë‹ˆë‹¤. (ì‹œí—˜ ë‹¨ê³¨ í•¨ì •!)")
        st.warning("âš ï¸ **ì‹œí—˜ í¬ì¸íŠ¸:** ê±´ë¬¼ì€ ì •ì•¡ë²•ì´ì§€ë§Œ, <b>ê¸°ê³„ê¸°êµ¬(ê±´ì„¤ê¸°ê³„ í¬í•¨)ëŠ” **ì •ë¥ ë²•**ì„ ì ìš©í•˜ì—¬ ì´ˆê¸°ì— ë§ì´ ê°ê°€í•˜ëŠ” ê²ƒì´ ì›ì¹™ì…ë‹ˆë‹¤.")

    with tab3:
        st.subheader("ë¬´í˜•ìì‚° ë° ì„ëŒ€ë£Œ")
        st.markdown("""
        | í‰ê°€ ëŒ€ìƒ | ì£¼ëœ í‰ê°€ë°©ë²• (ì›ì¹™) | **ìƒê°/í™˜ì› (ì£¼ë°©ë²•)** | **í•©ë¦¬ì„± ê²€í†  (ë¶€ë°©ë²•)** | ë©”ë‰´ ì„ íƒ |
        | :--- | :--- | :--- | :--- | :--- |
        | **ê´‘ì—…ì¬ë‹¨** | **ìˆ˜ìµí™˜ì›ë²•** | **ìƒì‚°ëŸ‰ë¹„ë¡€ë²•** | - | ğŸ‘‰ `ìˆ˜ìµì„± (ìˆ˜ìµí™˜ì›ë²•)` |
        | **ì˜ì—…ê¶Œ** | **ìˆ˜ìµí™˜ì›ë²•** | **ì¸ìš°ë“œë²•** | ê±°ë˜ì‚¬ë¡€ë¹„êµë²• | ğŸ‘‰ `íˆ¬ìíƒ€ë‹¹ì„± (DCF)` |
        | **ì„ëŒ€ë£Œ** | **ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•** | - | **ì ì‚°ë²•** | ğŸ‘‰ `ì„ëŒ€ë£Œ (ì„ëŒ€ì‚¬ë¡€)` |
        | **ê¸°ì—…ê°€ì¹˜** | **ìˆ˜ìµí™˜ì›ë²•** | DCF | ê°ì¢… ë¹„ìœ¨ë¶„ì„ | ğŸ‘‰ `íˆ¬ìíƒ€ë‹¹ì„± (DCF)` |
        """)
        st.caption("â€» **ì„ëŒ€ë£Œ:** ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•ì´ ê³¤ë€í•œ ê²½ìš° ì ì‚°ë²•ì„ ì“°ê±°ë‚˜, ì ì‚°ë²•ìœ¼ë¡œ êµ¬í•œ ì‹œì‚°ì„ë£Œë¡œ í•©ë¦¬ì„±ì„ ê²€í† í•©ë‹ˆë‹¤.")
        st.caption("â€» ê´‘ì‚° ë“± ê³ ê°ˆì„± ìì‚°ì€ ê¸°ê°„ë³´ë‹¤ëŠ” **ìºë‚¸ ì–‘(ìƒì‚°ëŸ‰)**ì— ë¹„ë¡€í•´ì„œ ê°ê°€í•©ë‹ˆë‹¤.")

    # --- [New] ëª©ì ë³„ ë¹„êµ íƒ­ ---
    with tab4:
        st.subheader("âš–ï¸ í‰ê°€ ëª©ì ë³„ í•µì‹¬ ê¸°ì¤€ ë¹„êµ")
        st.markdown("ì‹¤ë¬´ì™€ ì´ë¡  ì‹œí—˜ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ **4ëŒ€ í‰ê°€ ëª©ì **ì˜ ì°¨ì´ì ì…ë‹ˆë‹¤.")
        
        # ê°€ë…ì„±ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ ì ìš©ëœ í‘œ
        st.markdown("""
        | êµ¬ë¶„ | **ì¼ë°˜ í‰ê°€** (ë§¤ë§¤ ë“±) | **ë‹´ë³´ í‰ê°€** | **ë³´ìƒ í‰ê°€** (ê²½ë§¤/ê³µë§¤ í¬í•¨) | **ì •ë¹„ì‚¬ì—… í‰ê°€** (ì¬ê°œë°œ) |
        | :--- | :--- | :--- | :--- | :--- |
        | **ê·¼ê±° ë²•ë ¹** | ê°ì •í‰ê°€ë²• / ê°ì¹™ | ì€í–‰ì—…ê°ë…ê·œì • / ê°ì¹™ | **í† ì§€ë³´ìƒë²•** | **ë„ì‹œì •ë¹„ë²•** |
        | **í‰ê°€ ê°€ì•¡** | **ì‹œì¥ê°€ì¹˜** (Market Value) | **ì‹œì¥ê°€ì¹˜** (ë³´ìˆ˜ì ) | **ì ì •ê°€ê²©** (Proper Price) | **ì¢…ì „ìì‚° í‰ê°€ì•¡** |
        | **ê¸°ì¤€ ì‹œì ** | ê°€ê²©ì¡°ì‚¬ ì™„ë£Œì¼ | ê°€ê²©ì¡°ì‚¬ ì™„ë£Œì¼ | í˜‘ì˜/ì¬ê²° ë‹¹ì‹œ | **ì‚¬ì—…ì‹œí–‰ì¸ê°€ ê³ ì‹œì¼** |
        | **í‘œì¤€ì§€ ì„ ì •** | ê¸°ì¤€ì‹œì  ë‹¹í•´ë…„ë„ | ê¸°ì¤€ì‹œì  ë‹¹í•´ë…„ë„ | **ì‚¬ì—…ì¸ì •ê³ ì‹œì¼ ì „** ê³µì‹œì§€ê°€ | ê¸°ì¤€ì‹œì  ë‹¹í•´ë…„ë„ |
        | **ê°œë°œì´ìµ** | ë°˜ì˜í•¨ (í˜„í™© ê¸°ì¤€) | ë°˜ì˜í•¨ (í™˜ê°€ì„± ê³ ë ¤) | **ì² ì €íˆ ë°°ì œ** | ë°˜ì˜í•¨ (ê°œë°œ ê¸°ëŒ€ê° í¬í•¨) |
        """)

        st.divider()
        
        col_a, col_b = st.columns(2)
        with col_a:
            st.error("ğŸ›‘ **ë³´ìƒí‰ê°€ ì£¼ì˜ì‚¬í•­ (í† ì§€ë³´ìƒë²•)**")
            st.markdown("""
            * **í‘œì¤€ì§€:** ë°˜ë“œì‹œ 'ì‚¬ì—…ì¸ì •ê³ ì‹œì¼' ì´ì „ì˜ ê³µì‹œì§€ê°€ë¥¼ ì¨ì•¼ í•¨. (í•´ë‹¹ ì‚¬ì—…ìœ¼ë¡œ ì˜¤ë¥¸ ë•…ê°’ ë°°ì œ)
            * **ì‹œì ìˆ˜ì •:** í•´ë‹¹ ì‚¬ì—…ê³¼ ê´€ê³„ì—†ëŠ” ì¸ê·¼ ì‹œ/êµ°/êµ¬ ì§€ê°€ë³€ë™ë¥  ì‚¬ìš©.
            * **ê·¸ ë°–ì˜ ìš”ì¸:** ë³´ìƒ ì„ ë¡€ ì°¸ì‘ ì‹œì—ë„ ê°œë°œì´ìµì´ í¬í•¨ë˜ì§€ ì•Šì€ ì‚¬ë¡€ë¥¼ ì¨ì•¼ í•¨.
            """)
            
        with col_b:
            st.warning("ğŸ—ï¸ **ì •ë¹„ì‚¬ì—… í‰ê°€ ì£¼ì˜ì‚¬í•­ (ë„ì •ë²•)**")
            st.markdown("""
            * **ê¸°ì¤€ì‹œì :** ì¡°í•©ì› ë¶„ë‹´ê¸ˆì„ ì •í•˜ëŠ” 'ê´€ë¦¬ì²˜ë¶„ê³„íš' ìˆ˜ë¦½ì„ ìœ„í•œ í‰ê°€ëŠ” **ì‚¬ì—…ì‹œí–‰ì¸ê°€ ê³ ì‹œì¼**ì´ ê¸°ì¤€ì„.
            * **ëª©ì :** ì¡°í•©ì› ê°„ì˜ í˜•í‰ì„±(ë¹„ë¡€ìœ¨)ì„ ë§ì¶”ëŠ” ê²ƒì´ í•µì‹¬ì´ë¯€ë¡œ, ì ˆëŒ€ì  ê°€ê²©ë³´ë‹¤ ìƒëŒ€ì  ê°€ê²© ê· í˜•ì´ ì¤‘ìš”í•¨.
            """)
            
        st.info("ğŸ¦ **ë‹´ë³´í‰ê°€ Tip:** ë‹´ë³´í‰ê°€ëŠ” ì€í–‰ì´ ëˆì„ ë–¼ì´ì§€ ì•Šê²Œ í•˜ëŠ” ê²ƒì´ ëª©ì ì´ë¯€ë¡œ, ë‚˜ì¤‘ì— ê²½ë§¤ë¡œ ë„˜ì–´ê°”ì„ ë•Œ íŒ”ë¦´ ê°€ê²©(ë‚™ì°°ê°€ìœ¨)ì„ ê³ ë ¤í•˜ì—¬ **ë³´ìˆ˜ì ìœ¼ë¡œ í‰ê°€**í•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.")
    st.divider()
    st.subheader("ğŸ“Œ ê°ì •í‰ê°€ 3ë°©ì‹ 6ë°©ë²• ìš”ì•½")
    
    col_a, col_b, col_c = st.columns(3)
    with col_a:
        st.error("**ë¹„êµë°©ì‹ (ì‹œì¥ì„±)**")
        st.write("1. ê±°ë˜ì‚¬ë¡€ë¹„êµë²•")
        st.write("2. ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•")
        st.write("3. ê³µì‹œì§€ê°€ê¸°ì¤€ë²•")
    with col_b:
        st.warning("**ì›ê°€ë°©ì‹ (ë¹„ìš©ì„±)**")
        st.write("4. ì›ê°€ë²•")
        st.write("5. ì ì‚°ë²•")
    with col_c:
        st.success("**ìˆ˜ìµë°©ì‹ (ìˆ˜ìµì„±)**")
        st.write("6. ìˆ˜ìµí™˜ì›ë²•")
        st.write("7. ìˆ˜ìµë¶„ì„ë²•")
# ==============================================================================
# 1. í† ì§€ í‰ê°€ (ê³µì‹œì§€ê°€ê¸°ì¤€ë²•)
# ==============================================================================
if menu == "í† ì§€ (ê³µì‹œì§€ê°€ê¸°ì¤€ë²•)":
    st.header("ğŸ“ í† ì§€ í‰ê°€: ê³µì‹œì§€ê°€ê¸°ì¤€ë²•")
    
    col_input, col_result = st.columns([1, 1.2])

    with col_input:
        st.subheader("1. ìš”ì¸ ì…ë ¥ (Inputs)")
        
        # 1) í‘œì¤€ì§€
        st.markdown("**â‘  í‘œì¤€ì§€ ê³µì‹œì§€ê°€ ($P_{std}$)**")
        p_std = st.number_input("í‘œì¤€ì§€ ë‹¨ê°€ (ì›/ã¡)", value=1000000, step=10000, format="%d")
        
        # 2) ì‹œì ìˆ˜ì •
        st.markdown("**â‘¡ ì‹œì ìˆ˜ì • ($Time$)**")
        time_mod = st.number_input("ì§€ê°€ë³€ë™ë¥  ì ìš©ì¹˜ (1+r)", value=1.035, format="%.4f", step=0.001, help="ê¸°ì¤€ì‹œì ê¹Œì§€ì˜ ì§€ê°€ë³€ë™ë¥ ")
        
        # 3) ì§€ì—­ìš”ì¸
        st.markdown("**â‘¢ ì§€ì—­ìš”ì¸ ($Reg$)**")
        reg_factor = st.number_input("ì§€ì—­ìš”ì¸ ë¹„êµì¹˜", value=1.000, format="%.3f", step=0.01, help="ì¸ê·¼ì§€ì—­ ì†Œì¬ ì‹œ 1.00")
        
        # 4) ê°œë³„ìš”ì¸
        st.markdown("**â‘£ ê°œë³„ìš”ì¸ ($Ind$)**")
        ind_factor = st.number_input("ê°œë³„ìš”ì¸ ë¹„êµì¹˜", value=1.100, format="%.3f", step=0.01, help="ê°€ë¡œ, ì ‘ê·¼, í™˜ê²½, íšì§€ ì¡°ê±´ ë“±")
        
        # 5) ê·¸ ë°–ì˜ ìš”ì¸
        st.markdown("**â‘¤ ê·¸ ë°–ì˜ ìš”ì¸ ($Other$)**")
        other_factor = st.number_input("ê¸°íƒ€ìš”ì¸ ë³´ì •ì¹˜", value=1.500, format="%.3f", step=0.01, help="ê±°ë˜ì‚¬ë¡€/í‰ê°€ì„ ë¡€ ì°¸ì‘")
        
        # 6) ë©´ì 
        area = st.number_input("ëŒ€ìƒë¬¼ê±´ ë©´ì  (ã¡)", value=165.0, format="%.1f")

    with col_result:
        st.subheader("2. ê³„ì‚° ê²°ê³¼ ë° í’€ì´")
        
        # ê³„ì‚° ë¡œì§
        final_unit_price = p_std * time_mod * reg_factor * ind_factor * other_factor
        final_total_price = final_unit_price * area
        
        # ê²°ê³¼ í‘œì‹œ
        st.success(f"ğŸ¯ ã¡ë‹¹ ë‹¨ê°€: {int(final_unit_price):,} ì›")
        st.error(f"ğŸ’° ì´ í‰ê°€ì•¡: {int(final_total_price):,} ì›")
        
        st.markdown("### ğŸ“ ìˆ˜ì‹ í’€ì´ ê³¼ì •")
        st.latex(r'''
        P_{target} = P_{std} \times \text{ì‹œì } \times \text{ì§€ì—­} \times \text{ê°œë³„} \times \text{ê·¸ë°–}
        ''')
        
        calculation_text = f"""
        {p_std:,} (í‘œì¤€ì§€)
        x {time_mod:.4f} (ì‹œì ìˆ˜ì •)
        x {reg_factor:.3f} (ì§€ì—­ìš”ì¸)
        x {ind_factor:.3f} (ê°œë³„ìš”ì¸)
        x {other_factor:.3f} (ê·¸ ë°–ì˜ ìš”ì¸)
        ---------------------------
        = {int(final_unit_price):,} ì›/ã¡
        """
        st.code(calculation_text)

        # í•˜ë‹¨ ì´ë¡ /ë²•ê·œ ë…¸íŠ¸
        st.markdown("---")
        st.markdown('<div class="info-box">', unsafe_allow_html=True)
        st.markdown("#### ğŸ’¡ í•µì‹¬ Check Point")
        st.markdown("""
        * **[ë²•ê·œ] ê°ì¹™ ì œ14ì¡°:** í† ì§€ëŠ” ê³µì‹œì§€ê°€ê¸°ì¤€ë²•ì´ ì›ì¹™. ì ì •í•œ ì‹¤ê±°ë˜ê°€ê°€ ìˆëŠ” ê²½ìš° ê±°ë˜ì‚¬ë¡€ë¹„êµë²• ê°€ëŠ¥.
        * **[ì´ë¡ /ì‹¤ë¬´] ì‚¬ì •ë³´ì • X:** í‘œì¤€ì§€ ê³µì‹œì§€ê°€ëŠ” ì´ë¯¸ ì ì • ê°€ê²©ì´ë¯€ë¡œ **ì‚¬ì •ë³´ì •(Speculation Check)ì„ ì ˆëŒ€ í•˜ì§€ ì•ŠìŒ.**
        * **[ì‹¤ë¬´ Tip]** ê·¸ ë°–ì˜ ìš”ì¸ ë³´ì •ì¹˜ëŠ” ì¸ê·¼ ì§€ì—­ì˜ ê±°ë˜ì‚¬ë¡€ë‚˜ í‰ê°€ ì„ ë¡€ë¥¼ ì—­ì‚°í•˜ì—¬ ì‚°ì¶œí•¨(ê°€ì¥ ë°°ì ì´ ë†’ê³  í‹€ë¦¬ê¸° ì‰¬ì›€).
        """)
        st.markdown('</div>', unsafe_allow_html=True)

# ==============================================================================
# 2. ê±´ë¬¼ í‰ê°€ (ì›ê°€ë²• - ê°ê°€ìˆ˜ì • ë°©ë²•ë³„ ë¹„êµ)
# ==============================================================================
elif menu == "ê±´ë¬¼ (ì›ê°€ë²•)":
    st.header("ğŸ—ï¸ ê±´ë¬¼ í‰ê°€: ì›ê°€ë²• (ê°ê°€ìˆ˜ì • 3ë°©ì‹)")
    st.markdown("ë‚´ìš©ì—°ìˆ˜ì— ì˜í•œ ê°ê°€ìˆ˜ì • ë°©ë²•(ì •ì•¡ë²•, ì •ë¥ ë²•, ìƒí™˜ê¸°ê¸ˆë²•) ë¹„êµ")
    
    # ê°ê°€ìˆ˜ì • ë°©ë²• ì„ íƒ
    dep_method = st.radio(
        "ê°ê°€ìˆ˜ì • ë°©ë²•ì„ ì„ íƒí•˜ì„¸ìš”",
        ["ì •ì•¡ë²• (Straight-line)", "ì •ë¥ ë²• (Declining Balance)", "ìƒí™˜ê¸°ê¸ˆë²• (Sinking Fund)"],
        horizontal=True
    )

    col_input, col_result = st.columns([1, 1.2])
    
    with col_input:
        st.subheader("1. ì…ë ¥ (Inputs)")
        reprocurement_cost = st.number_input("ì¬ì¡°ë‹¬ì›ê°€ (C) (ì›)", value=500000000, step=1000000, format="%d")
        useful_life = st.number_input("ì „ì²´ ë‚´ìš©ì—°ìˆ˜ (Në…„)", value=40, step=1)
        elapsed_years = st.number_input("ê²½ê³¼ ì—°ìˆ˜ (në…„)", value=10, step=1)
        residual_ratio = st.slider("ì”ê°€ìœ¨ (R) (%)", 0, 30, 10) / 100
        
        # ìƒí™˜ê¸°ê¸ˆë²•ì¼ ë•Œë§Œ ì´ììœ¨ ì…ë ¥ì°½ì´ ëœ¨ë„ë¡ ì„¤ì •
        safe_rate = 0.0
        if "ìƒí™˜ê¸°ê¸ˆë²•" in dep_method:
            st.markdown("##### â• ìƒí™˜ê¸°ê¸ˆë²• ì¶”ê°€ ì…ë ¥")
            safe_rate = st.number_input("ì¶•ì ì´ìœ¨ (i) (%)", value=2.0, step=0.1, format="%.2f") / 100

    with col_result:
        st.subheader("2. ì ì‚°ê°€ì•¡ ì‚°ì¶œ")
        
        current_value = 0
        depreciation_total = 0
        
        # --- A. ì •ì•¡ë²• ê³„ì‚° ---
        if "ì •ì•¡ë²•" in dep_method:
            # ë§¤ë…„ ê°ê°€ì•¡ = C * (1-R) / N
            annual_dep = reprocurement_cost * (1 - residual_ratio) / useful_life
            depreciation_total = annual_dep * elapsed_years
            current_value = reprocurement_cost - depreciation_total
            
            st.markdown("### ğŸ“ ìˆ˜ì‹ (ì •ì•¡ë²•)")
            st.latex(r'''
            P = C - D_n = C - \left[ \underbrace{C(1-R)}_{\text{ëŒ€ìƒì•¡}} \times \frac{1}{N} \times n \right]
            ''')
            st.info("ë§¤ë…„ ê°ê°€ì•¡ì´ ì¼ì •í•¨ (ì§ì„  í˜•íƒœ)")

        # --- B. ì •ë¥ ë²• ê³„ì‚° ---
        elif "ì •ë¥ ë²•" in dep_method:
            # ì”ê°€ìœ¨ R = (1-d)^N  => ì •ë¥  d = 1 - R^(1/N)
            if residual_ratio <= 0:
                d = 0.9 # ì”ê°€ìœ¨ 0ì´ë©´ ê³„ì‚° ë¶ˆê°€í•˜ë¯€ë¡œ ì„ì˜ ì„¤ì • (ì´ë¡ ìƒ ì”ê°€ìœ¨>0 í•„ìš”)
                st.warning("ì •ë¥ ë²•ì€ ì”ê°€ìœ¨ì´ 0ë³´ë‹¤ ì»¤ì•¼ ì •í™•í•©ë‹ˆë‹¤.")
            else:
                d = 1 - (residual_ratio ** (1/useful_life))
            
            # në…„ í›„ ê°€ì¹˜ = C * (1-d)^n
            current_value = reprocurement_cost * ((1 - d) ** elapsed_years)
            depreciation_total = reprocurement_cost - current_value
            
            st.markdown(f"**ì‚°ì¶œëœ ìƒê°ë¥ (d):** {d*100:.2f}%")
            st.markdown("### ğŸ“ ìˆ˜ì‹ (ì •ë¥ ë²•)")
            st.latex(r'''
            P = C (1-d)^n \quad \left( \text{ë‹¨,} \ d = 1 - \sqrt[N]{R} \right)
            ''')
            st.info("ì´ˆê¸°ì— ê°ê°€ì•¡ì´ í¬ê³  ê°ˆìˆ˜ë¡ ì¤„ì–´ë“¦ (ì²´ê°ìƒê°)")

        # --- C. ìƒí™˜ê¸°ê¸ˆë²• ê³„ì‚° ---
        elif "ìƒí™˜ê¸°ê¸ˆë²•" in dep_method:
            # ê°ê°€ìƒê°ëŒ€ìƒì•¡ = C * (1-R)
            target_dep_amt = reprocurement_cost * (1 - residual_ratio)
            
            # ê°ì±„ê¸°ê¸ˆê³„ìˆ˜ (ë§¤ë…„ ì ë¦½ì•¡ ë¹„ìœ¨)
            if safe_rate == 0:
                sff = 1/useful_life
            else:
                sff = safe_rate / ((1 + safe_rate) ** useful_life - 1)
                
            # në…„ ë™ì•ˆì˜ ê°ê°€ëˆ„ê³„ì•¡ = ë§¤ë…„ì ë¦½ì•¡ * ì—°ê¸ˆì˜ ë‚´ê°€ê³„ìˆ˜
            # ì—°ê¸ˆë‚´ê°€í‘œ = ((1+i)^n - 1) / i
            if safe_rate == 0:
                future_value_factor = elapsed_years
            else:
                future_value_factor = ((1 + safe_rate) ** elapsed_years - 1) / safe_rate
            
            depreciation_total = (target_dep_amt * sff) * future_value_factor
            current_value = reprocurement_cost - depreciation_total
            
            st.markdown("### ğŸ“ ìˆ˜ì‹ (ìƒí™˜ê¸°ê¸ˆë²•)")
            st.latex(r'''
            D_n = \underbrace{C(1-R)}_{\text{ëŒ€ìƒì•¡}} \times \underbrace{\frac{i}{(1+i)^N - 1}}_{\text{ìƒí™˜ê¸°ê¸ˆìœ¨(SFF)}} \times \underbrace{\frac{(1+i)^n - 1}{i}}_{\text{ì—°ê¸ˆì˜ë‚´ê°€ê³„ìˆ˜}}
            ''')
            st.info("ì´ìê°€ ë¶™ìœ¼ë¯€ë¡œ ì‹¤ì œ ì ë¦½ ë¶€ë‹´ì´ ì ìŒ (ê°ê°€ì•¡ì´ ì ê²Œ ì¡í˜ â†’ ê°€ê²©ì´ ë†’ìŒ)")

        # ê²°ê³¼ í‘œì‹œ (ê³µí†µ)
        st.divider()
        st.write(f"**ê°ê°€ëˆ„ê³„ì•¡:** {int(depreciation_total):,} ì›")
        st.success(f"ğŸ¯ ì ì‚°ê°€ì•¡: {int(current_value):,} ì›")
        
        # --- [ë³´ë„ˆìŠ¤] ê·¸ë˜í”„ë¡œ ë¹„êµí•˜ê¸° ---
        st.markdown("---")
        st.subheader("ğŸ“Š ê°ê°€ìˆ˜ì • ê³¡ì„  ë¹„êµ (Graph)")
        
        import pandas as pd
        import numpy as np
        
        # 0ë…„ ~ Në…„ê¹Œì§€ ë°ì´í„° ìƒì„±
        years = list(range(0, int(useful_life) + 1))
        
        # 1. ì •ì•¡ë²• ë°ì´í„°
        val_straight = [reprocurement_cost * (1 - (1-residual_ratio)*(y/useful_life)) for y in years]
        
        # 2. ì •ë¥ ë²• ë°ì´í„°
        d_rate = 1 - (residual_ratio ** (1/useful_life))
        val_declining = [reprocurement_cost * ((1-d_rate)**y) for y in years]
        
        # 3. ìƒí™˜ê¸°ê¸ˆë²• ë°ì´í„° (ì´ìœ¨ 2% ê°€ì •)
        # ë¹„êµë¥¼ ìœ„í•´ ê³ ì •ì´ìœ¨ 2% ì‚¬ìš© (ì‚¬ìš©ì ì…ë ¥ê°’ì´ 0ì¼ìˆ˜ë„ ìˆì–´ì„œ)
        i_graph = 0.02
        sff_graph = i_graph / ((1 + i_graph) ** useful_life - 1)
        target_amt = reprocurement_cost * (1 - residual_ratio)
        val_sinking = []
        for y in years:
            acc_factor = ((1 + i_graph) ** y - 1) / i_graph
            dep_amt = target_amt * sff_graph * acc_factor
            val_sinking.append(reprocurement_cost - dep_amt)

        chart_data = pd.DataFrame({
            'ì—°ìˆ˜': years,
            'ì •ì•¡ë²•': val_straight,
            'ì •ë¥ ë²•': val_declining,
            'ìƒí™˜ê¸°ê¸ˆë²•(i=2%)': val_sinking
        }).set_index('ì—°ìˆ˜')
        
        st.line_chart(chart_data)
        st.caption("â–² ì ì‚°ê°€ì•¡ í¬ê¸° ë¹„êµ: ìƒí™˜ê¸°ê¸ˆë²• > ì •ì•¡ë²• > ì •ë¥ ë²• (ì´ˆê¸° ê¸°ì¤€)")

# ==============================================================================
# 3. ê±°ë˜ì‚¬ë¡€ë¹„êµë²• (ì¼ê´„/êµ¬ë¶„)
# ==============================================================================
elif menu == "í† ì§€ê±´ë¬¼ ì¼ê´„/êµ¬ë¶„ (ê±°ë˜ì‚¬ë¡€ë¹„êµë²•)":
    st.header("ğŸ˜ï¸ ê±°ë˜ì‚¬ë¡€ë¹„êµë²•")
    
    col_input, col_result = st.columns([1, 1.2])
    
    with col_input:
        st.subheader("1. ì‚¬ë¡€ ë° ë¹„êµì¹˜ ì…ë ¥")
        case_price = st.number_input("ì‚¬ë¡€ ê°€ê²© (ì›)", value=800000000, step=1000000, format="%d")
        
        # ì‚¬ì •ë³´ì • ìˆìŒ/ì—†ìŒ ì²´í¬
        is_speculation = st.checkbox("ì‚¬ì •ë³´ì • í•„ìš” (íŠ¹ìˆ˜ì‚¬ì • ê°œì…)", value=True)
        if is_speculation:
            spec_factor = st.number_input("ì‚¬ì •ë³´ì •ì¹˜", value=0.950, format="%.3f")
        else:
            spec_factor = 1.0
            
        time_factor = st.number_input("ì‹œì ìˆ˜ì •ì¹˜", value=1.020, format="%.3f")
        reg_factor = st.number_input("ì§€ì—­ìš”ì¸ ë¹„êµì¹˜", value=1.000, format="%.3f")
        ind_factor = st.number_input("ê°œë³„ìš”ì¸ ë¹„êµì¹˜", value=0.980, format="%.3f")
        area_ratio = st.number_input("ë©´ì ë¹„êµì¹˜ (ëŒ€ìƒ/ì‚¬ë¡€)", value=1.100, format="%.3f")
        
    with col_result:
        st.subheader("2. ë¹„ì¤€ê°€ì•¡ ì‚°ì¶œ")
        
        final_price = case_price * spec_factor * time_factor * reg_factor * ind_factor * area_ratio
        
        st.success(f"ğŸ¯ ë¹„ì¤€ê°€ì•¡: {int(final_price):,} ì›")
        
        st.markdown("### ğŸ“ ìˆ˜ì‹ í’€ì´")
        st.latex(r'''
        P = P_{case} \times \text{ì‚¬ì •} \times \text{ì‹œì } \times \text{ì§€ì—­} \times \text{ê°œë³„} \times \text{ë©´ì }
        ''')
        
        st.code(f"""
        {case_price:,} (ì‚¬ë¡€)
        x {spec_factor} (ì‚¬ì •ë³´ì •)
        x {time_factor} (ì‹œì ìˆ˜ì •)
        x {reg_factor} (ì§€ì—­ìš”ì¸)
        x {ind_factor} (ê°œë³„ìš”ì¸)
        x {area_ratio} (ë©´ì ë¹„êµ)
        -----------------------
        = {int(final_price):,} ì›
        """)
        
        st.markdown("---")
        st.markdown('<div class="warning-box">', unsafe_allow_html=True)
        st.markdown("#### ğŸ’¡ í•µì‹¬ Check Point")
        st.markdown("""
        * **[ë²•ê·œ] ê°ì¹™ ì œ16ì¡°:** ì§‘í•©ê±´ë¬¼(ì•„íŒŒíŠ¸, ì˜¤í”¼ìŠ¤í…” ë“±)ì€ ê±°ë˜ì‚¬ë¡€ë¹„êµë²•ì´ ì£¼ëœ ë°©ë²•.
        * **[ì´ë¡ ] ë°°ë¶„ë²•:** ì¼ê´„ ì‚¬ë¡€ ê°€ê²©ì—ì„œ í† ì§€/ê±´ë¬¼ ê°€ê²©ì„ êµ¬ë¶„í•´ì•¼ í•  ê²½ìš° 'ë¹„ìœ¨ ë°©ì‹' ë˜ëŠ” 'ê³µì œ ë°©ì‹' ì‚¬ìš© ê³ ë ¤.
        * **[ì£¼ì˜]** ì‚¬ì •ë³´ì •ì€ ì‚¬ë¡€ê°€ 'ì •ìƒì ì¸ ì‹œì¥'ì—ì„œ ê±°ë˜ë˜ì§€ ì•Šì•˜ì„ ë•Œë§Œ ì ìš©í•¨.
        """)
        st.markdown('</div>', unsafe_allow_html=True)
# ==============================================================================
# 4. ìˆ˜ìµì„± ë¶€ë™ì‚° (ìˆ˜ìµí™˜ì›ë²• - ìë³¸íšŒìˆ˜ë°©ë²•ë³„ 4ë°©ì‹)
# ==============================================================================
elif menu == "ìˆ˜ìµì„± ë¶€ë™ì‚° (ìˆ˜ìµí™˜ì›ë²•)":
    st.header("ğŸ’° ìˆ˜ìµí™˜ì›ë²•: ìë³¸íšŒìˆ˜ ë°©ë²•ì— ë”°ë¥¸ ë¶„ë¥˜")
    st.markdown("êµê³¼ì„œì— ë‚˜ì˜¨ **[ì§ì ‘ë²• / ì§ì„ ë²• / ìƒí™˜ê¸°ê¸ˆë²• / ì—°ê¸ˆë²•]** ì™„ë²½ ë¹„êµ")

    # 4ê°€ì§€ ë°©ë²• ì„ íƒ (êµê³¼ì„œ í‘œ ìˆœì„œëŒ€ë¡œ)
    method_option = st.radio(
        "í‰ê°€ ëª¨ë¸ì„ ì„ íƒí•˜ì„¸ìš”",
        ["1. ì§ì ‘ë²• (Direct)", "2. ì§ì„ ë²• (Straight-line)", "3. ìƒí™˜ê¸°ê¸ˆë²• (Hoskold)", "4. ì—°ê¸ˆë²• (Inwood)"],
        horizontal=True
    )
    
    st.divider()

    col1, col2 = st.columns([1, 1.3])

    # --- ê³µí†µ ì…ë ¥ê°’ ---
    with col1:
        st.subheader("1. ê¸°ì´ˆ ë°ì´í„° ì…ë ¥")
        a = st.number_input("ìˆœìˆ˜ìµ (a, NOI)", value=50000000, step=1000000, format="%d")
        r = st.number_input("ìë³¸ìˆ˜ìµë¥  (r, í• ì¸ìœ¨) (%)", value=6.0, step=0.1, format="%.2f") / 100
        
        # ì§ì ‘ë²• ì™¸ì—ëŠ” ë‚´ìš©ì—°ìˆ˜ í•„ìš”
        if "ì§ì ‘ë²•" not in method_option:
            n = st.number_input("ì”ì¡´ ë‚´ìš©ì—°ìˆ˜ (në…„)", value=20, step=1)
        
        # ìƒí™˜ê¸°ê¸ˆë²•ì€ ì•ˆì „ì´ìœ¨ í•„ìš”
        if "ìƒí™˜ê¸°ê¸ˆë²•" in method_option:
            i = st.number_input("ì•ˆì „ì´ìœ¨/ì¶•ì ì´ìœ¨ (i) (%)", value=2.0, step=0.1, format="%.2f") / 100

    # --- ê³„ì‚° ë° ìˆ˜ì‹ í‘œì‹œ ---
    with col2:
        st.subheader("2. êµê³¼ì„œ ìˆ˜ì‹ ë° í’€ì´")

        # -------------------------------------------------------
        # [1] ì§ì ‘ë²• (ì˜êµ¬í™˜ì›)
        # -------------------------------------------------------
        if "ì§ì ‘ë²•" in method_option:
            value = a / r
            
            st.latex(r'''
            V = \frac{a}{r}
            ''')
            st.info(f"ê³„ì‚°: {int(a):,} Ã· {r} = {int(value):,} ì›")
            
            st.markdown("---")
            st.markdown("#### ğŸ“– êµê³¼ì„œ ì´ë¡  Check")
            st.write("âœ”ï¸ **ìë³¸íšŒìˆ˜:** ë¶ˆìš” (ì˜êµ¬ì  ì†Œë“)")
            st.write("âœ”ï¸ **íŠ¹ì§•:** ë‚´ìš©ì—°ìˆ˜ê°€ ë¬´í•œí•œ ìì‚°")
            st.error("ğŸ“ **ì ìš©ëŒ€ìƒ:** í† ì§€, ë¹„ìƒê°ìì‚°")

        # -------------------------------------------------------
        # [2] ì§ì„ ë²• (ë‚´ìš©ì—°ìˆ˜ë²•)
        # -------------------------------------------------------
        elif "ì§ì„ ë²•" in method_option:
            # í™˜ì›ìœ¨ R = r + 1/n
            cap_recovery = 1 / n
            cap_rate = r + cap_recovery
            value = a / cap_rate
            
            st.latex(r'''
            V = \frac{a}{r + \frac{1}{n}}
            ''')
            
            st.write(f"**Â· ìë³¸ìˆ˜ìµë¥ (r):** {r*100:.2f}%")
            st.write(f"**Â· ìë³¸íšŒìˆ˜ìœ¨(1/n):** {cap_recovery*100:.2f}% (ì§ì„ ìƒê°)")
            st.metric("ì¢…í•© í™˜ì›ìœ¨ (R)", f"{cap_rate*100:.2f}%")
            st.success(f"ğŸ’ ìˆ˜ìµê°€ì•¡: {int(value):,} ì›")

            st.markdown("---")
            st.markdown("#### ğŸ“– êµê³¼ì„œ ì´ë¡  Check")
            st.write("âœ”ï¸ **ê°€ì •:** ë§¤ë…„ ì¼ì •ì•¡ ìë³¸íšŒìˆ˜, **ì¬íˆ¬ì ì—†ìŒ**")
            st.write("âœ”ï¸ **íŠ¹ì§•:** ì†Œë“ì´ ë§¤ë…„ ê°ì†Œí•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” ìì‚°")
            st.error("ğŸ“ **ì ìš©ëŒ€ìƒ:** ê±´ë¬¼(ë‚´ìš©ì—°ìˆ˜ ìœ í•œ), êµ¬ì¶•ë¬¼, ê¸°ê³„")

        # -------------------------------------------------------
        # [3] ìƒí™˜ê¸°ê¸ˆë²• (í˜¸ìŠ¤ì½œë“œ)
        # -------------------------------------------------------
        elif "ìƒí™˜ê¸°ê¸ˆë²•" in method_option:
            # í™˜ì›ìœ¨ R = r + i/((1+i)^n - 1)
            sff = i / ((1 + i) ** n - 1)
            cap_rate = r + sff
            value = a / cap_rate
            
            # êµê³¼ì„œ ìˆ˜ì‹ ëª¨ì–‘ ê·¸ëŒ€ë¡œ (ë¶„ìì— i)
            st.latex(r'''
            V = \frac{a}{r + \frac{i}{(1+i)^n - 1}}
            ''')
            
            st.write(f"**Â· ìë³¸ìˆ˜ìµë¥ (r):** {r*100:.2f}% (ìœ„í—˜ë¥ )")
            st.write(f"**Â· ìƒí™˜ê¸°ê¸ˆìœ¨(SFF @ i):** {sff*100:.4f}% (ì•ˆì „ì´ìœ¨ ì ìš©)")
            st.metric("ì¢…í•© í™˜ì›ìœ¨ (R)", f"{cap_rate*100:.4f}%")
            st.success(f"ğŸ’ ìˆ˜ìµê°€ì•¡: {int(value):,} ì›")
            
            st.markdown("---")
            st.markdown("#### ğŸ“– êµê³¼ì„œ ì´ë¡  Check")
            st.write("âœ”ï¸ **ê°€ì •:** íšŒìˆ˜ëœ ìë³¸ì„ **ì•ˆì „ì´ìœ¨(i)**ë¡œ ì¬íˆ¬ì")
            st.write("âœ”ï¸ **íŠ¹ì§•:** ìë³¸íšŒìˆ˜ë¶„ì´ ì ê²Œ ê³„ì‚°ë¨ -> í™˜ì›ìœ¨ ì‘ìŒ -> ê°€ì•¡ ë†’ê²Œ ë‚˜ì˜¬ ê²ƒ ê°™ì§€ë§Œ?")
            st.caption("*(ì£¼ì˜: ì´ë¡ ìƒ í˜¸ìŠ¤ì½œë“œëŠ” ìœ„í—˜ë¥  rì„ ë†’ê²Œ ì¡ìœ¼ë¯€ë¡œ ë³´í†µ ê°€ì•¡ì´ ê°€ì¥ ë‚®ê²Œ í‰ê°€ë¨)*")
            st.error("ğŸ“ **ì ìš©ëŒ€ìƒ:** ê´‘ì‚°, ì±„ì„ì¥, ê´‘ì—…ê¶Œ (ì†Œë©¸ì„± ìì‚°)")

        # -------------------------------------------------------
        # [4] ì—°ê¸ˆë²• (ì¸ìš°ë“œ)
        # -------------------------------------------------------
        elif "ì—°ê¸ˆë²•" in method_option:
            # í™˜ì›ìœ¨ R = r + r/((1+r)^n - 1)
            sff = r / ((1 + r) ** n - 1)
            cap_rate = r + sff
            value = a / cap_rate
            
            # êµê³¼ì„œ ìˆ˜ì‹ ëª¨ì–‘ ê·¸ëŒ€ë¡œ (ë¶„ìì— r)
            st.latex(r'''
            V = \frac{a}{r + \frac{r}{(1+r)^n - 1}}
            ''')
            
            st.write(f"**Â· ìë³¸ìˆ˜ìµë¥ (r):** {r*100:.2f}%")
            st.write(f"**Â· ìƒí™˜ê¸°ê¸ˆìœ¨(SFF @ r):** {sff*100:.4f}% (ìë³¸ìˆ˜ìµë¥  ì¬íˆ¬ì)")
            st.metric("ì¢…í•© í™˜ì›ìœ¨ (R)", f"{cap_rate*100:.4f}%")
            st.success(f"ğŸ’ ìˆ˜ìµê°€ì•¡: {int(value):,} ì›")
            
            st.markdown("---")
            st.markdown("#### ğŸ“– êµê³¼ì„œ ì´ë¡  Check")
            st.write("âœ”ï¸ **ê°€ì •:** íšŒìˆ˜ëœ ìë³¸ì„ **ìë³¸ìˆ˜ìµë¥ (r)**ë¡œ ì¬íˆ¬ì")
            st.write("âœ”ï¸ **íŠ¹ì§•:** ìˆ˜ìµì„± ë†’ì€ ê³³ì— ì¬íˆ¬ìí•˜ë¯€ë¡œ ê°€ì¹˜ê°€ ë†’ê²Œ í‰ê°€ë¨")
            st.error("ğŸ“ **ì ìš©ëŒ€ìƒ:** ì–´ì—…ê¶Œ, ì˜ì—…ê¶Œ, ì„ëŒ€ê¶Œ (ìƒê°ìì‚°)")

# ==============================================================================
# 5. ì„ëŒ€ë£Œ í‰ê°€ (ì ì‚°ë²•)
# ==============================================================================
elif menu == "ì„ëŒ€ë£Œ (ì ì‚°ë²•)":
    st.header("ğŸ“ˆ ì„ëŒ€ë£Œ í‰ê°€: ì ì‚°ë²•")
    
    col1, col2 = st.columns([1, 1.2])
    
    with col1:
        st.subheader("1. ê¸°ì´ˆë°ì´í„° ì…ë ¥")
        base_value = st.number_input("ê¸°ì´ˆê°€ì•¡ (ì›)", value=500000000, step=1000000, format="%d", help="ì„ëŒ€ ëŒ€ìƒ ë¬¼ê±´ì˜ ì›ë³¸ ê°€ì¹˜")
        exp_rate = st.number_input("ê¸°ëŒ€ì´ìœ¨ (%)", value=4.0, format="%.2f", step=0.1) / 100
        nec_exp = st.number_input("í•„ìš”ì œê²½ë¹„ (ì›/ë…„)", value=5000000, step=100000, format="%d", help="ê°ê°€ìƒê°ë¹„, ìœ ì§€ê´€ë¦¬ë¹„, ì¡°ì„¸ê³µê³¼ ë“±")
        
    with col2:
        st.subheader("2. ì ì‚°ì„ë£Œ ì‚°ì¶œ")
        
        base_rent = base_value * exp_rate  # ìˆœì„ë£Œ ìƒë‹¹ì•¡
        total_rent = base_rent + nec_exp   # ì ì‚°ì„ë£Œ
        
        st.success(f"ğŸ¯ ì—°ê°„ ì ì‚°ì„ë£Œ: {int(total_rent):,} ì›")
        st.info(f"ì›” í™˜ì‚° ì„ë£Œ: {int(total_rent/12):,} ì›")
        
        st.markdown("### ğŸ“ ìˆ˜ì‹ í’€ì´")
        st.latex(r'''
        \text{ì„ë£Œ} = (\text{ê¸°ì´ˆê°€ì•¡} \times \text{ê¸°ëŒ€ì´ìœ¨}) + \text{í•„ìš”ì œê²½ë¹„}
        ''')
        
        st.code(f"""
        {int(base_value):,} (ê¸°ì´ˆê°€ì•¡)
        x {exp_rate} (ê¸°ëŒ€ì´ìœ¨)
        -----------------------
        = {int(base_rent):,} (ìˆœì„ë£Œ)
        + {int(nec_exp):,} (í•„ìš”ì œê²½ë¹„)
        -----------------------
        = {int(total_rent):,} ì›
        """)

        st.markdown("---")
        st.markdown('<div class="warning-box">', unsafe_allow_html=True)
        st.markdown("#### ğŸ’¡ í•µì‹¬ Check Point")
        st.markdown("""
        * **[ì´ë¡ ] ê¸°ëŒ€ì´ìœ¨ vs í™˜ì›ìœ¨:** ê¸°ëŒ€ì´ìœ¨ì€ ì„ëŒ€ì°¨ ê¸°ê°„ ë™ì•ˆì˜ 'ì‚¬ìš©ëŒ€ê°€' ì„±ê²©ì´ê³ , í™˜ì›ìœ¨ì€ ì¥ë˜ ì†Œë“ì„ í˜„ì¬ê°€ì¹˜ë¡œ ë§Œë“œëŠ” 'ìë³¸í™”' ì„±ê²©ì„.
        * **[ë²•ê·œ] ê°ì¹™ ì œ22ì¡°:** ì„ëŒ€ë£ŒëŠ” **ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•**ì´ ì›ì¹™. ì ì‚°ë²•ì€ ì°¨ì„ ì±…ìœ¼ë¡œ ì‚¬ìš©í•˜ê±°ë‚˜ ì‹œì‚°ê°€ì•¡ ì¡°ì •ìš©ìœ¼ë¡œ ì”€.
        """)
        st.markdown('</div>', unsafe_allow_html=True)

# ==============================================================================
# 6. í• ì¸í˜„ê¸ˆìˆ˜ì§€ë¶„ì„ë²• (DCF) & ìë³¸íšŒìˆ˜ë°©ë²• ë¹„êµ
# ==============================================================================
elif menu == "íˆ¬ìíƒ€ë‹¹ì„±/ê°€ì¹˜ (í• ì¸í˜„ê¸ˆìˆ˜ì§€ë¶„ì„ë²• DCF)":
    st.header("ğŸ“‰ í• ì¸í˜„ê¸ˆìˆ˜ì§€ë¶„ì„ë²• ë° ìë³¸íšŒìˆ˜ë°©ë²•")
    st.markdown("ìˆ˜ìµì˜ íë¦„ê³¼ ìë³¸íšŒìˆ˜ ì´ë¡ ì— ë”°ë¥¸ 3ê°€ì§€ í‰ê°€ëª¨ë¸")
    
    # íƒ­ìœ¼ë¡œ 3ê°€ì§€ ë°©ë²• êµ¬ë¶„
    dcf_method = st.radio(
        "í‰ê°€ ëª¨ë¸ì„ ì„ íƒí•˜ì„¸ìš”", 
        ["Type A: ì¼ë°˜ DCF (ë³€ë™ì†Œë“)", "Type B: ì¸ìš°ë“œë²• (Inwood)", "Type C: í˜¸ìŠ¤ì½œë“œë²• (Hoskold)"],
        horizontal=True
    )
    
    st.divider()

    # ---------------------------------------------------
    # Type A: ì¼ë°˜ DCF (ê¸°ì¡´ê³¼ ë™ì¼ - ë³€ë™ì†Œë“ + ë³µê·€ê°€ì•¡)
    # ---------------------------------------------------
    if "Type A" in dcf_method:
        st.subheader("ğŸ…°ï¸ ì¼ë°˜ DCF (Standard)")
        st.info("ë§¤ë…„ ì†Œë“ì´ ë³€ë™í•˜ë©°, ê¸°ë§ì— ë¶€ë™ì‚°ì„ ë§¤ê°(ë³µê·€)í•˜ëŠ” ì¼ë°˜ì  ìƒí™©")

        col1, col2 = st.columns([1, 1.5])
        with col1:
            holding_period = st.slider("ë³´ìœ ê¸°ê°„ (në…„)", 1, 10, 5)
            initial_noi = st.number_input("1ì°¨ë…„ë„ ìˆœìˆ˜ìµ (NOI)", value=50000000, step=1000000, format="%d")
            growth_rate = st.number_input("ë§¤ë…„ ì†Œë“ ìƒìŠ¹ë¥  (%)", value=2.0, step=0.1, format="%.1f") / 100
            discount_rate = st.number_input("í• ì¸ìœ¨ (Y) (%)", value=7.0, step=0.1, format="%.2f") / 100
            terminal_cap_rate = st.number_input("ìµœì¢…í™˜ì›ìœ¨ (R_term) (%)", value=6.0, step=0.1, format="%.2f") / 100
        
        with col2:
            # ê³„ì‚° ë¡œì§
            pvs = []
            years = []
            total_pv_noi = 0
            
            for i in range(1, holding_period + 1):
                noi = initial_noi * ((1 + growth_rate) ** (i - 1))
                pv = noi / ((1 + discount_rate) ** i)
                pvs.append(pv)
                years.append(f"{i}ë…„")
                total_pv_noi += pv
            
            next_noi = initial_noi * ((1 + growth_rate) ** holding_period)
            reversion = next_noi / terminal_cap_rate
            reversion_pv = reversion / ((1 + discount_rate) ** holding_period)
            final_value = total_pv_noi + reversion_pv
            
            st.success(f"ğŸ’ ìˆ˜ìµê°€ì•¡: {int(final_value):,} ì›")
            
            # ì‹œê°í™”
            chart_data = {"êµ¬ë¶„": years + ["ë³µê·€ê°€ì•¡"], "í˜„ì¬ê°€ì¹˜": [int(p) for p in pvs] + [int(reversion_pv)]}
            st.bar_chart(chart_data, x="êµ¬ë¶„", y="í˜„ì¬ê°€ì¹˜")
            
            st.markdown("""
            **ğŸ’¡ íŠ¹ì§•:** ì†Œë“ì´ ë§¤ë…„ ë³€ë™($g \neq 0$)í•˜ê³ , ìë³¸íšŒìˆ˜ê°€ ë³´ìœ ê¸°ê°„ ë§ ì²˜ë¶„(ë³µê·€ê°€ì•¡)ì„ í†µí•´ ì´ë£¨ì–´ì§.
            """)

# ---------------------------------------------------
    # Type B: ì¸ìš°ë“œë²• (Inwood Method) - í™˜ì›ì´ìœ¨ ë°©ì‹
    # ---------------------------------------------------
    elif "Type B" in dcf_method:
        st.subheader("ğŸ…±ï¸ ì¸ìš°ë“œë²• (Inwood Method)")
        st.info("ë§¤ë…„ ì†Œë“ì´ ì¼ì •(í‰ì¤€)í•˜ë©°, íšŒìˆ˜ëœ ìë³¸ì„ 'í• ì¸ìœ¨(Y)'ë¡œ ì¬íˆ¬ìí•œë‹¤ê³  ê°€ì •.")

        col1, col2 = st.columns([1, 1.2])
        with col1:
            income = st.number_input("ë§¤ë…„ ìˆœìˆ˜ìµ (A)", value=30000000, step=1000000, format="%d")
            period = st.number_input("ìˆ˜ìµ ê¸°ê°„ (në…„)", value=10, step=1)
            rate = st.number_input("ìë³¸ìˆ˜ìµë¥ /í• ì¸ìœ¨ (Y or r) (%)", value=6.0, step=0.1, format="%.2f") / 100
            
        with col2:
            # í˜„ë™ë‹˜ì´ ìµìˆ™í•˜ì‹  ë°©ì‹: R = Y + SFF(Y)
            # SFF(Y) = r / ((1+r)^n - 1)
            
            if rate == 0:
                sff_y = 1 / period
            else:
                sff_y = rate / ((1 + rate) ** period - 1)
            
            cap_rate_inwood = rate + sff_y  # í™˜ì›ì´ìœ¨ R
            
            value = income / cap_rate_inwood
            
            st.metric("ìƒí™˜ê¸°ê¸ˆìœ¨ (SFF @ Y)", f"{sff_y:.5f}")
            st.metric("ì¢…í•© í™˜ì›ìœ¨ (R)", f"{cap_rate_inwood:.5f}")
            st.success(f"ğŸ’ ìˆ˜ìµê°€ì•¡: {int(value):,} ì›")
            
            st.markdown("### ğŸ“ ìˆ˜ì‹ (í™˜ì›ì´ìœ¨ ë°©ì‹)")
            st.latex(r'''
            V = \frac{A}{Y + \frac{Y}{(1+Y)^n - 1}}
            ''')
            st.write("(ë¶„ëª¨ì˜ ë’·ë¶€ë¶„ì´ í• ì¸ìœ¨ Yë¡œ êµ¬í•œ ìƒí™˜ê¸°ê¸ˆìœ¨ì…ë‹ˆë‹¤)")
            
            st.warning("""
            **âš ï¸ í˜¸ìŠ¤ì½œë“œë²•ê³¼ì˜ ì°¨ì´ì :**
            * ìˆ˜ì‹ í˜•íƒœëŠ” $R = Y + SFF$ ë¡œ ë™ì¼í•©ë‹ˆë‹¤.
            * ë‹¤ë§Œ, ì¸ìš°ë“œë²•ì€ SFFë¥¼ êµ¬í•  ë•Œ **í• ì¸ìœ¨(Y)**ì„ ì“°ê³ , í˜¸ìŠ¤ì½œë“œë²•ì€ **ì•ˆì „ì´ìœ¨(i)**ì„ ì”ë‹ˆë‹¤.
            """)

    # ---------------------------------------------------
    # Type C: í˜¸ìŠ¤ì½œë“œë²• (ì†Œë©¸ì„± ìì‚° + ì•ˆì „ì´ìœ¨)
    # ---------------------------------------------------
    elif "Type C" in dcf_method:
        st.subheader("Â©ï¸ í˜¸ìŠ¤ì½œë“œë²• (Hoskold Method)")
        st.info("ê´‘ì‚°ì²˜ëŸ¼ ìì‚°ì´ ì†Œë©¸ë˜ëŠ” ê²½ìš°. íšŒìˆ˜ëœ ìë³¸ì„ ë§¤ìš° ì•ˆì „í•œ 'ì•ˆì „ì´ìœ¨(i)'ë¡œ ì¬íˆ¬ìí•œë‹¤ê³  ê°€ì •.")

        col1, col2 = st.columns([1, 1.2])
        with col1:
            income = st.number_input("ë§¤ë…„ ìˆœìˆ˜ìµ (A)", value=50000000, step=1000000, format="%d")
            period = st.number_input("ì±„êµ´ ê°€ëŠ¥ ì—°ìˆ˜ (në…„)", value=20, step=1)
            spec_rate = st.number_input("ìœ„í—˜ë¥ /íˆ¬ê¸°ì ì´ìœ¨ (Y) (%)", value=10.0, step=0.1, format="%.2f", help="í•´ë‹¹ ì‚¬ì—…ì˜ ìš”êµ¬ìˆ˜ìµë¥ ") / 100
            safe_rate = st.number_input("ì•ˆì „ì´ìœ¨/ì¶•ì ì´ìœ¨ (i) (%)", value=3.0, step=0.1, format="%.2f", help="ì€í–‰ ì˜ˆê¸ˆ ê¸ˆë¦¬ ìˆ˜ì¤€ (êµ­ê³µì±„ ë“±)") / 100
            
        with col2:
            # í˜¸ìŠ¤ì½œë“œ ê³„ìˆ˜
            # Value = A / (Y + SFF_safe)
            # SFF_safe = i / ((1+i)^n - 1)
            
            sff = safe_rate / ((1 + safe_rate) ** period - 1) # ê°ì±„ê¸°ê¸ˆê³„ìˆ˜ (ì•ˆì „ì´ìœ¨ ì‚¬ìš©)
            capitalization_rate = spec_rate + sff             # ì¢…í•©í™˜ì›ìœ¨
            
            value = income / capitalization_rate
            
            st.metric("ìƒí™˜ê¸°ê¸ˆìœ¨ (SFF)", f"{sff:.5f}")
            st.metric("ì¢…í•© í™˜ì›ìœ¨ (R)", f"{capitalization_rate:.5f}")
            st.success(f"ğŸ’ ìˆ˜ìµê°€ì•¡: {int(value):,} ì›")
            
            st.markdown("### ğŸ“ ìˆ˜ì‹")
            st.latex(r'''
            V = \frac{A}{Y_{risk} + \frac{i}{(1+i)^n - 1}}
            ''')
            
            st.error("""
            **âš ï¸ í•µì‹¬ ì°¨ì´ì  (vs ì¸ìš°ë“œ):**
            * **ì¬íˆ¬ììœ¨:** ì¸ìš°ë“œëŠ” **í• ì¸ìœ¨(Y)**ë¡œ ì¬íˆ¬ìí•˜ì§€ë§Œ, í˜¸ìŠ¤ì½œë“œëŠ” ì•ˆì „í•œ **ì•ˆì „ì´ìœ¨(i)**ë¡œ ì¬íˆ¬ìí•¨.
            * **ê°€ì¹˜ ë¹„êµ:** ë³´í†µ ì•ˆì „ì´ìœ¨ì´ í• ì¸ìœ¨ë³´ë‹¤ ë‚®ìœ¼ë¯€ë¡œ, ë™ì¼ ì¡°ê±´ ì‹œ **í˜¸ìŠ¤ì½œë“œë²•ì— ì˜í•œ ê°€ì¹˜ê°€ ì¸ìš°ë“œë²•ë³´ë‹¤ ë‚®ê²Œ ë‚˜ì˜´** (ë³´ìˆ˜ì  í‰ê°€).
            """)
# ==============================================================================
# 7. ì”ì—¬ë²• & ë¬¼ë¦¬ì  íˆ¬ìê²°í•©ë²• (Residual Technique)
# ==============================================================================
elif menu == "í† ì§€/ê±´ë¬¼ ê°€ì¹˜ ë¶„ë¦¬ (ì”ì—¬ë²• & íˆ¬ìê²°í•©ë²•)":
    st.header("ğŸ° ì”ì—¬ë²• & ë¬¼ë¦¬ì  íˆ¬ìê²°í•©ë²•")
    st.markdown("ì „ì²´ ìˆœìˆ˜ìµ(NOI)ì„ í† ì§€ì™€ ê±´ë¬¼ì´ ê¸°ì—¬í•œ ëª«ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê°€ì¹˜ë¥¼ ì‚°ì •í•©ë‹ˆë‹¤.")

    # íƒ­ìœ¼ë¡œ ê¸°ëŠ¥ êµ¬ë¶„
    method_tab = st.radio("êµ¬í•˜ë ¤ëŠ” ê°€ì¹˜ëŠ”?", ["í† ì§€ ê°€ì¹˜ êµ¬í•˜ê¸° (í† ì§€ì”ì—¬ë²•)", "ê±´ë¬¼ ê°€ì¹˜ êµ¬í•˜ê¸° (ê±´ë¬¼ì”ì—¬ë²•)"], horizontal=True)
    
    col1, col2 = st.columns([1, 1.5])
    
    with col1:
        st.subheader("1. ì¡°ê±´ ì…ë ¥")
        noi = st.number_input("ì „ì²´ ìˆœì˜ì—…ì†Œë“ (NOI)", value=80000000, step=1000000, format="%d")
        
        if "í† ì§€" in method_tab:
            st.info("ê±´ë¬¼ì˜ ê°€ì¹˜ëŠ” ì›ê°€ë²• ë“±ìœ¼ë¡œ ì´ë¯¸ ì•Œê³  ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.")
            known_value = st.number_input("ê¸°ì¡´ ê±´ë¬¼ ê°€ì¹˜ (V_B)", value=500000000, step=1000000, format="%d")
            known_label = "ê±´ë¬¼"
            target_label = "í† ì§€"
        else:
            st.info("í† ì§€ì˜ ê°€ì¹˜ëŠ” ê³µì‹œì§€ê°€ë²• ë“±ìœ¼ë¡œ ì´ë¯¸ ì•Œê³  ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.")
            known_value = st.number_input("ê¸°ì¡´ í† ì§€ ê°€ì¹˜ (V_L)", value=800000000, step=1000000, format="%d")
            known_label = "í† ì§€"
            target_label = "ê±´ë¬¼"

        # í™˜ì›ìœ¨ ì…ë ¥
        st.markdown("##### í™˜ì›ìœ¨ ì„¤ì •")
        r_land = st.number_input("í† ì§€ í™˜ì›ìœ¨ (R_L) (%)", value=4.0, step=0.1, format="%.2f") / 100
        r_bldg = st.number_input("ê±´ë¬¼ í™˜ì›ìœ¨ (R_B) (%)", value=6.0, step=0.1, format="%.2f", help="ë³´í†µ ê°ê°€ìƒê°ë¥ ì´ ë”í•´ì ¸ í† ì§€í™˜ì›ìœ¨ë³´ë‹¤ ë†’ìŒ") / 100
        
        # í˜„ì¬ ì ìš©í•  í™˜ì›ìœ¨ ê²°ì •
        if target_label == "í† ì§€":
            target_cap_rate = r_land
            known_cap_rate = r_bldg
        else:
            target_cap_rate = r_bldg
            known_cap_rate = r_land

    with col2:
        st.subheader("2. ê°€ì¹˜ ì‚°ì • ë° ë°°ë¶„")
        
        # 1) ì•„ëŠ” ìì‚°ì— ê·€ì†ë˜ëŠ” ì†Œë“ ê³„ì‚°
        income_known = known_value * known_cap_rate
        
        # 2) ì”ì—¬ ì†Œë“ (ëª¨ë¥´ëŠ” ìì‚°ì˜ ëª«)
        income_residual = noi - income_known
        
        # 3) ëª¨ë¥´ëŠ” ìì‚°ì˜ ê°€ì¹˜ í™˜ì›
        if income_residual < 0:
            st.error("âš ï¸ ì—ëŸ¬: ì”ì—¬ ì†Œë“ì´ ë§ˆì´ë„ˆìŠ¤ì…ë‹ˆë‹¤! ì…ë ¥í•œ ìì‚° ê°€ì¹˜ê°€ ë„ˆë¬´ ë†’ê±°ë‚˜ í™˜ì›ìœ¨ì´ ê³¼ëŒ€í•©ë‹ˆë‹¤.")
            value_target = 0
        else:
            value_target = income_residual / target_cap_rate
            
        total_value = known_value + value_target
        weighted_r = (value_target/total_value * target_cap_rate) + (known_value/total_value * known_cap_rate)

        # ê²°ê³¼ ì¶œë ¥
        st.metric(f"êµ¬í•´ì§„ {target_label} ê°€ì¹˜", f"{int(value_target):,} ì›")
        st.success(f"ğŸ˜ï¸ ì „ì²´ ë¶€ë™ì‚° ê°€ì¹˜: {int(total_value):,} ì›")
        st.caption(f"(ì¢…í•© í™˜ì›ìœ¨: {weighted_r*100:.2f}%)")

        # ì‹œê°í™” (ë„ë„› ì°¨íŠ¸)
        import pandas as pd
        
        st.markdown("### ğŸ“Š ì†Œë“ì˜ ë°°ë¶„ (Income Split)")
        
        # ë°ì´í„°í”„ë ˆì„ ìƒì„± (ìŠ¤íŠ¸ë¦¼ë¦¿ ì°¨íŠ¸ìš©)
        df_income = pd.DataFrame({
            "Source": [f"{known_label} ê·€ì† ì†Œë“", f"{target_label} ê·€ì† ì†Œë“ (ì”ì—¬)"],
            "Amount": [income_known, income_residual]
        })
        
        # ë§‰ëŒ€ ì°¨íŠ¸ë¡œ ë¹„ì¤‘ ë³´ì—¬ì£¼ê¸°
        st.bar_chart(df_income, x="Source", y="Amount")
        
        st.markdown("### ğŸ“ ìˆ˜ì‹ í’€ì´")
        st.latex(r'''
        V_{target} = \frac{NOI - (V_{known} \times R_{known})}{R_{target}}
        ''')
        
        st.code(f"""
        {int(noi):,} (ì „ì²´ NOI)
        - {int(income_known):,} ({known_label} ëª«: {int(known_value):,} x {known_cap_rate*100}%)
        ---------------------------
        = {int(income_residual):,} ({target_label} ê·€ì† ì”ì—¬ì†Œë“)
        Ã· {target_cap_rate} ({target_label} í™˜ì›ìœ¨)
        ---------------------------
        = {int(value_target):,} ì› ({target_label} ê°€ì¹˜)
        """)
        
        st.markdown("---")
        st.markdown('<div class="info-box">', unsafe_allow_html=True)
        st.markdown("#### ğŸ’¡ í•µì‹¬ Check Point")
        st.markdown("""
        * **[ì´ë¡ ] ë¬¼ë¦¬ì  íˆ¬ìê²°í•©ë²•:** í† ì§€ì™€ ê±´ë¬¼ì˜ ì†Œë“ì°½ì¶œëŠ¥ë ¥ì´ ë‹¤ë¥´ê³ , ìœ„í—˜(í™˜ì›ìœ¨)ë„ ë‹¤ë¥´ë‹¤ëŠ” ê°€ì •ì—ì„œ ì¶œë°œí•¨.
        * **[ê³µì‹] $R_B > R_L$:** ê±´ë¬¼ì€ ì˜ì†ì ì´ì§€ ì•Šê³  ê°ê°€ìƒê°ì´ ë˜ë¯€ë¡œ, ìë³¸íšŒìˆ˜ë¶„ì´ í¬í•¨ëœ ê±´ë¬¼í™˜ì›ìœ¨ì´ í† ì§€í™˜ì›ìœ¨ë³´ë‹¤ ë†’ì€ ê²ƒì´ ì¼ë°˜ì ì„.
        * **[ì‹¤ë¬´]** í† ì§€ì”ì—¬ë²•ì€ ê±´ë¬¼ì´ ì‹ ì¶•(ìµœìœ íš¨ì´ìš©)ì¼ ë•Œ ê°€ì¥ ì •í™•í•˜ë©°, ì˜¤ë˜ëœ ê±´ë¬¼ì¼ìˆ˜ë¡ ì² ê±°ë¹„ ë“±ì˜ ë³€ìˆ˜ë¡œ ì¸í•´ ì‹ ë¢°ë„ê°€ ë‚®ì•„ì§.
        """)
        st.markdown('</div>', unsafe_allow_html=True)
# ==============================================================================
# 8. ì„ëŒ€ë£Œ í‰ê°€ (ì„ëŒ€ì‚¬ë¡€ë¹„êµë²• - ì›ì¹™)
# ==============================================================================
elif menu == "ì„ëŒ€ë£Œ (ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•)":
    st.header("ğŸ™ï¸ ì„ëŒ€ë£Œ í‰ê°€: ì„ëŒ€ì‚¬ë¡€ë¹„êµë²• (ì›ì¹™)")
    st.markdown("ì‚¬ë¡€ì˜ ì‹¤ì§ˆì„ëŒ€ë£Œë¥¼ ì‚°ì •í•˜ì—¬ ëŒ€ìƒ ë¬¼ê±´ì˜ ì ì • ì„ëŒ€ë£Œë¥¼ ë„ì¶œí•©ë‹ˆë‹¤.")
    
    col1, col2 = st.columns([1, 1.3])
    
    with col1:
        st.subheader("1. ì„ëŒ€ì‚¬ë¡€ ë°ì´í„°")
        # ì‚¬ë¡€ì˜ ê³„ì•½ ë‚´ìš©
        case_deposit = st.number_input("ì‚¬ë¡€ ë³´ì¦ê¸ˆ (ì›)", value=100000000, step=1000000, format="%d")
        case_monthly = st.number_input("ì‚¬ë¡€ ì›”ì„¸ (ì›/ì›”)", value=3000000, step=100000, format="%d")
        case_maintenance = st.number_input("ì‚¬ë¡€ ê´€ë¦¬ë¹„ ë“± (ì‹¤ë¹„ì´ˆê³¼ë¶„ë§Œ) (ì›/ì›”)", value=0, step=10000, format="%d", help="ì‹¤ë¹„ìƒë‹¹ì•¡ì€ ì œì™¸í•˜ê³ , ì‹¤ì§ˆì  ì„ëŒ€ë£Œ ì„±ê²©ì¸ ë¶€ë¶„ë§Œ ì…ë ¥")
        
        st.markdown("##### âš™ï¸ ë³´ì¦ê¸ˆ ìš´ìš©ì´ìœ¨ (ì „í™˜ìœ¨)")
        conversion_rate = st.number_input("ë³´ì¦ê¸ˆ ì ìš© ì´ìœ¨ (%)", value=5.0, step=0.1, format="%.2f", help="ë³´ì¦ê¸ˆì„ ì›”ì„¸ë¡œ ì „í™˜í•˜ê±°ë‚˜ ìš´ìš©ìµì„ ê³„ì‚°í•  ë•Œ ì ìš©") / 100
        
        st.divider()
        st.subheader("2. ë¹„êµì¹˜ ì…ë ¥")
        spec_check = st.checkbox("ì‚¬ì •ë³´ì • í•„ìš” (íŠ¹ìˆ˜ê´€ê³„ ê±°ë˜ ë“±)", value=False)
        spec_factor = 1.0
        if spec_check:
            spec_factor = st.number_input("ì‚¬ì •ë³´ì •ì¹˜", value=1.000, format="%.3f")
            
        time_factor = st.number_input("ì‹œì ìˆ˜ì •ì¹˜", value=1.020, format="%.3f")
        reg_factor = st.number_input("ì§€ì—­ìš”ì¸ ë¹„êµì¹˜", value=1.000, format="%.3f")
        ind_factor = st.number_input("ê°œë³„ìš”ì¸ ë¹„êµì¹˜", value=1.050, format="%.3f")
        area_ratio = st.number_input("ë©´ì  ë¹„êµì¹˜ (ëŒ€ìƒ/ì‚¬ë¡€)", value=1.000, format="%.3f")

    with col2:
        st.subheader("3. ë¹„ì¤€ì„ë£Œ ì‚°ì¶œ")
        
        # [Step 1] ì‚¬ë¡€ì˜ ì‹¤ì§ˆì„ë£Œ ì‚°ì • (ì—°ê°„ ê¸°ì¤€)
        # ìš´ìš©ìµ = ë³´ì¦ê¸ˆ * ì´ìœ¨
        deposit_income = case_deposit * conversion_rate
        # ì—°ê°„ ì›”ì„¸ = ì›”ì„¸ * 12
        annual_monthly_rent = case_monthly * 12
        # ì—°ê°„ ê´€ë¦¬ë¹„ ìˆ˜ì… = ê´€ë¦¬ë¹„ * 12
        annual_maintenance = case_maintenance * 12
        
        # ì‚¬ë¡€ ì‹¤ì§ˆì„ë£Œ í•©ê³„
        case_real_rent = deposit_income + annual_monthly_rent + annual_maintenance
        
        # [Step 2] ë¹„ì¤€ì„ë£Œ ê³„ì‚°
        target_rent = case_real_rent * spec_factor * time_factor * reg_factor * ind_factor * area_ratio
        
        # ê²°ê³¼ ì¶œë ¥
        st.markdown(f"**â‘  ì‚¬ë¡€ ë³´ì¦ê¸ˆ ìš´ìš©ìµ:** {int(deposit_income):,} ì›")
        st.markdown(f"**â‘¡ ì‚¬ë¡€ ì—°ê°„ ì›”ì„¸:** {int(annual_monthly_rent):,} ì›")
        st.info(f"ğŸ‘‰ **ì‚¬ë¡€ ì—°ê°„ ì‹¤ì§ˆì„ë£Œ:** {int(case_real_rent):,} ì› (â‘ +â‘¡+ê´€ë¦¬ë¹„)")
        
        st.divider()
        st.success(f"ğŸ¯ ëŒ€ìƒ ë¬¼ê±´ ì—°ê°„ ë¹„ì¤€ì„ë£Œ: {int(target_rent):,} ì›")
        st.caption(f"ì›” í™˜ì‚°ì•¡: {int(target_rent/12):,} ì›")
        
        st.markdown("### ğŸ“ ìˆ˜ì‹ í’€ì´")
        st.latex(r'''
        \text{ì„ë£Œ} = \text{ì‚¬ë¡€ì‹¤ì§ˆì„ë£Œ} \times \text{ì‚¬ì •} \times \text{ì‹œì } \times \text{ì§€ì—­} \times \text{ê°œë³„} \times \text{ë©´ì }
        ''')
        
        st.code(f"""
        {int(case_real_rent):,} (ì‚¬ë¡€)
        x {spec_factor} (ì‚¬ì •)
        x {time_factor} (ì‹œì )
        x {reg_factor} (ì§€ì—­)
        x {ind_factor} (ê°œë³„)
        x {area_ratio} (ë©´ì )
        -----------------------
        = {int(target_rent):,} ì›
        """)
        
        st.markdown("---")
        st.markdown('<div class="warning-box">', unsafe_allow_html=True)
        st.markdown("#### ğŸ’¡ í•µì‹¬ Check Point")
        st.markdown("""
        * **[ë²•ê·œ] ê°ì¹™ ì œ22ì¡°:** ì„ëŒ€ë£Œë¥¼ ê°ì •í‰ê°€í•  ë•ŒëŠ” **ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•**ì„ ì£¼ëœ ë°©ë²•ìœ¼ë¡œ ì ìš©í•˜ì—¬ì•¼ í•œë‹¤. (ì ì‚°ë²•ì€ ì˜ˆì™¸ì )
        * **[ì‹¤ë¬´] ì‹¤ì§ˆì„ë£Œ êµ¬ì„±:** ì§€ë¶ˆì„ë£Œ(ì›”ì„¸) + ì˜ˆê¸ˆì  ì„±ê²©ì˜ ì¼ì‹œê¸ˆ(ë³´ì¦ê¸ˆ)ì˜ ìš´ìš©ìµ + ì‹¤ë¹„ì´ˆê³¼ ê´€ë¦¬ë¹„ ë“±ì„ ëª¨ë‘ í•©ì‚°í•´ì•¼ í•¨.
        * **[íŒ]** ì¸µë³„ íš¨ìš©ë¹„(ê°œë³„ìš”ì¸)ê°€ ì„ëŒ€ë£Œ ê²©ì°¨ì— ê°€ì¥ í° ì˜í–¥ì„ ë¯¸ì¹¨. (1ì¸µ vs 2ì¸µ)
        """)
        st.markdown('</div>', unsafe_allow_html=True)
# ==============================================================================
# 9. ê³µê³µì‚¬ì—… ë³´ìƒ (ë³´ìƒí‰ê°€)
# ==============================================================================
elif menu == "ê³µê³µì‚¬ì—… ë³´ìƒ (ë³´ìƒí‰ê°€)":
    st.header("ğŸš§ ë³´ìƒí‰ê°€: í† ì§€ë³´ìƒë²• ì ìš©")
    st.markdown("ê°œë°œì´ìµì„ ë°°ì œí•œ 'ì ì •ê°€ê²©' ì‚°ì • (ì‚¬ì—…ì¸ì •ê³ ì‹œì¼ ê¸°ì¤€)")
    
    col1, col2 = st.columns([1, 1.3])
    
    with col1:
        st.subheader("1. ê¸°ì¤€ì‹œì  ë° í‘œì¤€ì§€ í™•ì •")
        # ë‚ ì§œ ì…ë ¥ ê¸°ëŠ¥
        project_date = st.date_input("ì‚¬ì—…ì¸ì • ê³ ì‹œì¼", datetime.date(2025, 1, 15))
        std_year = st.selectbox("ì ìš©í•  í‘œì¤€ì§€ ê³µì‹œë…„ë„", [project_date.year, project_date.year-1])
        
        st.info(f"ğŸ’¡ ì›ì¹™ì ìœ¼ë¡œ **{project_date.year}ë…„ 1ì›” 1ì¼** ê³µì‹œì§€ê°€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ë˜, í† ì§€ë³´ìƒë²• ì œ70ì¡°ì— ë”°ë¼ ì‚¬ì—…ì¸ì • ê³ ì‹œì¼ ì „ì˜ ì‹œì ì„ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤.")

        st.subheader("2. ê°€ì•¡ ì‚°ì • ìš”ì¸")
        std_price = st.number_input("ë¹„êµí‘œì¤€ì§€ ê³µì‹œì§€ê°€ (ì›/ã¡)", value=2000000, step=10000, format="%d")
        
        # ë³´ìƒí‰ê°€ì˜ í•µì‹¬: ì‹œì ìˆ˜ì •
        st.markdown("##### â“ ì‹œì ìˆ˜ì • (ì§€ê°€ë³€ë™ë¥ )")
        time_factor = st.number_input("ì‹œì ìˆ˜ì •ì¹˜", value=1.015, format="%.4f", help="ì‚¬ì—…ì¸ì •ê³ ì‹œì¼ ì „ì˜ í‘œì¤€ì§€ ê³µì‹œê¸°ì¤€ì¼ë¶€í„° ê°€ê²©ì‹œì ê¹Œì§€ì˜ ë³€ë™ë¥  (í•´ë‹¹ ì‚¬ì—… ì˜í–¥ ë°°ì œ)")
        
        reg_factor = st.number_input("ì§€ì—­ìš”ì¸ (í‘œì¤€ì§€ vs ëŒ€ìƒ)", value=1.000, format="%.3f")
        ind_factor = st.number_input("ê°œë³„ìš”ì¸ (ê°€ë¡œ/ì ‘ê·¼/íšì§€ ë“±)", value=1.100, format="%.3f")
        other_factor = st.number_input("ê·¸ ë°–ì˜ ìš”ì¸ (ê¸°íƒ€ìš”ì¸)", value=1.350, format="%.3f", help="ì¸ê·¼ ë³´ìƒì„ ë¡€ ë“±ì„ ì°¸ì‘í•˜ë˜ ê°œë°œì´ìµì€ ë°°ì œ")
        
        area = st.number_input("í¸ì… ë©´ì  (ã¡)", value=330.0, format="%.1f")

    with col2:
        st.subheader("3. ë³´ìƒì•¡ ì‚°ì¶œ")
        
        unit_price = std_price * time_factor * reg_factor * ind_factor * other_factor
        total_comp = unit_price * area
        
        st.success(f"ğŸ’° í† ì§€ ë³´ìƒí‰ê°€ì•¡: {int(total_comp):,} ì›")
        st.caption(f"(ë‹¨ê°€: {int(unit_price):,} ì›/ã¡)")
        
        st.markdown("### ğŸ“ ë³´ìƒí‰ê°€ ì‚°ì‹")
        st.latex(r'''
        P_{comp} = P_{std} \times \text{ì‹œì (ë°°ì œ)} \times \text{ì§€ì—­} \times \text{ê°œë³„} \times \text{ê·¸ë°–}
        ''')
        
        st.code(f"""
        [ì ìš© í‘œì¤€ì§€: {std_year}ë…„ë„]
        {std_price:,} 
        x {time_factor} (ì‹œì ìˆ˜ì •: ê°œë°œì´ìµ ë°°ì œ)
        x {reg_factor} (ì§€ì—­ìš”ì¸)
        x {ind_factor} (ê°œë³„ìš”ì¸)
        x {other_factor} (ê·¸ ë°–ì˜ ìš”ì¸)
        -----------------------
        = {int(unit_price):,} ì›/ã¡
        """)
        
        st.markdown("---")
        st.markdown('<div class="warning-box">', unsafe_allow_html=True)
        st.markdown("#### ğŸ’¡ í•µì‹¬ Check Point")
        st.markdown("""
        * **[ë²•ê·œ] í† ì§€ë³´ìƒë²• ì œ70ì¡°:** ë³´ìƒì•¡ì€ **ì‚¬ì—…ì¸ì •ê³ ì‹œì¼ ì „**ì˜ í˜‘ì˜ ì„±ë¦½ ë‹¹ì‹œ ë˜ëŠ” ìˆ˜ìš©ì¬ê²° ë‹¹ì‹œì˜ ê³µì‹œì§€ê°€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•¨.
        * **[ì´ë¡ ] ê°œë°œì´ìµ ë°°ì œ:** í•´ë‹¹ ê³µìµì‚¬ì—…ìœ¼ë¡œ ì¸í•œ ì§€ê°€ ìƒìŠ¹ë¶„ì€ ì² ì €íˆ ë°°ì œí•´ì•¼ í•˜ë¯€ë¡œ, ì‹œì ìˆ˜ì • ì‹œ í•´ë‹¹ ì‚¬ì—…ê³¼ ê´€ê³„ì—†ëŠ” ì¸ê·¼ ì‹œêµ°êµ¬ì˜ ì§€ê°€ë³€ë™ë¥ ì„ ì”€.
        * **[ì‹¤ë¬´] ê·¸ ë°–ì˜ ìš”ì¸:** ë³´ìƒí‰ê°€ì—ì„œ ê°€ì¥ ë…¼ë€ì´ ë˜ëŠ” ë¶€ë¶„. ì¸ê·¼ì˜ ì •ìƒì ì¸ ê±°ë˜ì‚¬ë¡€ë‚˜ ë³´ìƒì„ ë¡€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ë˜, ê·¸ ì„ ë¡€ì— ê°œë°œì´ìµì´ í¬í•¨ë˜ì—ˆëŠ”ì§€ ê²€í†  í•„ìš”.
        """)
        st.markdown('</div>', unsafe_allow_html=True)

# ==============================================================================
# 10. ì¬ê°œë°œ/ì¬ê±´ì¶• (ì •ë¹„ì‚¬ì—…í‰ê°€)
# ==============================================================================
elif menu == "ì¬ê°œë°œ/ì¬ê±´ì¶• (ì •ë¹„ì‚¬ì—…í‰ê°€)":
    st.header("ğŸ—ï¸ ì •ë¹„ì‚¬ì—…í‰ê°€: ì¢…ì „ìì‚° & ë¶„ë‹´ê¸ˆ")
    st.markdown("ë¹„ë¡€ìœ¨(%) ì‚°ì •ì„ í†µí•´ ì¡°í•©ì›ì˜ ê¶Œë¦¬ê°€ì•¡ê³¼ ë¶„ë‹´ê¸ˆì„ ì˜ˆì¸¡í•©ë‹ˆë‹¤.")

    col1, col2 = st.columns([1, 1.2])

    with col1:
        st.subheader("1. ì‚¬ì—… ì „ì²´ ê°œìš” (ì¡°í•©)")
        total_revenue = st.number_input("ì´ ìˆ˜ì… ì¶”ì‚°ì•¡ (ì¢…í›„ìì‚° ì´ì•¡) (ì–µ ì›)", value=5000, step=10, help="ì•„íŒŒíŠ¸/ìƒê°€ ì¼ë°˜ë¶„ì–‘ + ì¡°í•©ì›ë¶„ì–‘ ìˆ˜ì… í•©ê³„") * 100000000
        total_cost = st.number_input("ì´ ì‚¬ì—…ë¹„ ì¶”ì‚°ì•¡ (ê³µì‚¬ë¹„ ë“±) (ì–µ ì›)", value=3500, step=10) * 100000000
        total_before_asset = st.number_input("ì¢…ì „ìì‚° í‰ê°€ì•¡ ì´í•© (ì–µ ì›)", value=1200, step=10, help="ì¡°í•©ì›ë“¤ì´ ê°€ì§„ ê¸°ì¡´ í† ì§€/ê±´ë¬¼ì˜ ê°ì •í‰ê°€ì•¡ í•©ê³„") * 100000000
        
        st.divider()
        st.subheader("2. ë‚˜ì˜ ìì‚° (ê°œë³„ ì¡°í•©ì›)")
        my_appraisal = st.number_input("ë‚´ ì¢…ì „ìì‚° í‰ê°€ì•¡ (ì›)", value=800000000, step=10000000, format="%d", help="ê°ì •í‰ê°€ì‚¬ê°€ í‰ê°€í•œ ë‚´ í—Œ ì§‘ ê°€ê²©")
        target_apt_price = st.number_input("ì…ì£¼í¬ë§ í‰í˜• ì¡°í•©ì›ë¶„ì–‘ê°€ (ì›)", value=1100000000, step=10000000, format="%d")

    with col2:
        st.subheader("3. ê²°ê³¼ ë¶„ì„: ë¶„ë‹´ê¸ˆ vs í™˜ê¸‰ê¸ˆ")
        
        # [Step 1] ë¹„ë¡€ìœ¨ ê³„ì‚°
        # ë¹„ë¡€ìœ¨ = (ì´ìˆ˜ì… - ì´ë¹„ìš©) / ì¢…ì „ìì‚°ì´ì•¡
        if total_before_asset == 0:
            proportional_rate = 0
        else:
            proportional_rate = (total_revenue - total_cost) / total_before_asset
        
        # [Step 2] ê¶Œë¦¬ê°€ì•¡ ê³„ì‚°
        my_rights_value = my_appraisal * proportional_rate
        
        # [Step 3] ë¶„ë‹´ê¸ˆ ê³„ì‚° (ë¶„ì–‘ê°€ - ê¶Œë¦¬ê°€ì•¡)
        contribution = target_apt_price - my_rights_value
        
        # ê²°ê³¼ ì‹œê°í™”
        st.metric("ğŸ“Š ë¹„ë¡€ìœ¨ (ì‚¬ì—…ì„± ì§€í‘œ)", f"{proportional_rate*100:.2f} %")
        if proportional_rate > 1.0:
            st.caption("â–² 100% ì´ˆê³¼: ì‚¬ì—…ì„±ì´ ìš°ìˆ˜í•¨ (ê¶Œë¦¬ê°€ì•¡ ì¦ê°€)")
        else:
            st.caption("â–¼ 100% ë¯¸ë§Œ: ì‚¬ì—…ì„±ì´ ë‚®ìŒ (ê¶Œë¦¬ê°€ì•¡ ê°ì†Œ)")
            
        st.divider()
        st.markdown(f"**ğŸ¡ ë‚´ ì¢…ì „ìì‚° í‰ê°€ì•¡:** {int(my_appraisal):,} ì›")
        st.markdown(f"**â• ë¹„ë¡€ìœ¨ ì ìš© ê¶Œë¦¬ê°€ì•¡:** **{int(my_rights_value):,} ì›**")
        
        if contribution > 0:
            st.error(f"ğŸ’¸ ë‚©ë¶€í•  ë¶„ë‹´ê¸ˆ: {int(contribution):,} ì›")
        else:
            st.success(f"ğŸ’° ëŒë ¤ë°›ì„ í™˜ê¸‰ê¸ˆ: {int(abs(contribution)):,} ì›")
            
        st.markdown("### ğŸ“ ìˆ˜ì‹ í’€ì´")
        st.latex(r'''
        \text{ë¹„ë¡€ìœ¨} = \frac{\text{ì´ìˆ˜ì…} - \text{ì´ì‚¬ì—…ë¹„}}{\text{ì¢…ì „ìì‚°í‰ê°€ì´ì•¡}} \times 100
        ''')
        st.latex(r'''
        \text{ë¶„ë‹´ê¸ˆ} = \text{ì¡°í•©ì›ë¶„ì–‘ê°€} - (\text{ë‚´ ì¢…ì „ìì‚°} \times \text{ë¹„ë¡€ìœ¨})
        ''')

        st.markdown("---")
        st.markdown('<div class="info-box">', unsafe_allow_html=True)
        st.markdown("#### ğŸ’¡ í•µì‹¬ Check Point")
        st.markdown("""
        * **[ë²•ê·œ] ë„ì‹œì •ë¹„ë²•:** ê´€ë¦¬ì²˜ë¶„ê³„íš ìˆ˜ë¦½ ì‹œ ì¢…ì „ìì‚° ê°€ê²©ì€ 'ì‚¬ì—…ì‹œí–‰ì¸ê°€ ê³ ì‹œì¼'ì´ ê¸°ì¤€ì„.
        * **[ì‹¤ë¬´] ë¹„ë¡€ìœ¨ ì¡°ì •:** ì¡°í•©ì€ ë¹„ë¡€ìœ¨ì„ 100% ê·¼ì²˜ë¡œ ë§ì¶”ê¸° ìœ„í•´ ê³µì‚¬ë¹„(ë¹„ìš©)ë‚˜ ì¼ë°˜ë¶„ì–‘ê°€(ìˆ˜ì…)ë¥¼ ì¡°ì •í•˜ê¸°ë„ í•¨.
        * **[ìš©ì–´] ê¶Œë¦¬ê°€ì•¡:** ì¡°í•©ì›ì´ ì‹¤ì œ ì¬ì‚°ìœ¼ë¡œ ì¸ì •ë°›ëŠ” ê¸ˆì•¡. (ê°ì •í‰ê°€ì•¡ì´ ì•„ë‹˜! ê°í‰ì•¡ì— ë¹„ë¡€ìœ¨ì„ ê³±í•´ì•¼ í•¨)
        """)
        st.markdown('</div>', unsafe_allow_html=True)
# ==============================================================================
# 11. ì‚°ì • ìš”ì¸ ë° ê³ ë ¤ì‚¬í•­ ê°€ì´ë“œ (Reference)
# ==============================================================================
elif menu == "ğŸ“‹ ì‚°ì • ìš”ì¸ ë° ê³ ë ¤ì‚¬í•­ ê°€ì´ë“œ":
    st.header("ğŸ“‹ ê°ì •í‰ê°€ ì£¼ìš” ì‚°ì • ìš”ì¸ ë° ê³ ë ¤ì‚¬í•­")
    st.markdown("ë¬¼ê±´ë³„Â·ëª©ì ë³„ë¡œ ê°€ê²© í˜•ì„±ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” í•µì‹¬ ìš”ì¸(Checklist)ì…ë‹ˆë‹¤.")

    # íƒ­ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì •ë¦¬
    tab1, tab2, tab3, tab4, tab5 = st.tabs(["í† ì§€ (Land)", "ê±´ë¬¼ (Building)", "ì§‘í•©ê±´ë¬¼ (Apt)", "ì„ëŒ€ë£Œ/ê¶Œë¦¬", "ëª©ì ë³„ íŠ¹ì´ì‚¬í•­"])

    # --------------------------------------------------------------------------
    # Tab 1: í† ì§€ (ê³µì‹œì§€ê°€ê¸°ì¤€ë²•/ê±°ë˜ì‚¬ë¡€ë¹„êµë²•)
    # --------------------------------------------------------------------------
    with tab1:
        st.subheader("ğŸŒ² í† ì§€ í‰ê°€ ì‹œ ê³ ë ¤ ìš”ì¸")
        st.info("í† ì§€ëŠ” 'ìš©ë„ì§€ì—­'ì´ ê°€ì¹˜ë¥¼ ê²°ì •í•˜ëŠ” ê°€ì¥ í° ìš”ì¸ì´ë©°, ë¬¼ë¦¬ì  í˜„í™©ì— ë”°ë¥¸ ê²©ì°¨ê°€ í½ë‹ˆë‹¤.")
        
        st.markdown("""
        | êµ¬ë¶„ | ì£¼ìš” í™•ì¸ ì‚¬í•­ (ê°œë³„ìš”ì¸) | ì„¸ë¶€ ë‚´ìš© ë° ìš©ì–´ |
        | :--- | :--- | :--- |
        | **ê°€ë¡œì¡°ê±´**<br>(ë„ë¡œ) | **ë„ë¡œ í­ & ì ‘ë©´** | - **ê´‘ëŒ€ë¡œ/ì¤‘ë¡œ/ì†Œë¡œ:** ë„ë¡œ í­ì— ë”°ë¥¸ ë¶„ë¥˜<br>- **ì„¸ë¡œ(ê°€):** ìë™ì°¨ í†µí–‰ ê°€ëŠ¥<br>- **ì„¸ë¡œ(ë¶ˆ):** ìë™ì°¨ í†µí–‰ ë¶ˆê°€<br>- **ë§¹ì§€:** ë„ë¡œì— ì ‘í•˜ì§€ ì•ŠìŒ (ê°€ì¹˜ ê°ê°€ ì‹¬í•¨) |
        | **ì ‘ë©´ê°€ë¡œ** | **ì ‘í•¨ ìƒíƒœ** | - **í•œë©´/ê°ì§€:** ì½”ë„ˆ(ê°ì§€) í† ì§€ëŠ” ìƒì—…ì  ê°€ì¹˜ê°€ ë†’ìŒ<br>- **3ë©´/4ë©´ì ‘:** ê°œë°©ê°ì´ ì¢‹ìœ¼ë‚˜ í”„ë¼ì´ë²„ì‹œ ì¹¨í•´ ê°€ëŠ¥ì„± |
        | **ì ‘ê·¼ì¡°ê±´** | **êµí†µ/í¸ì˜ì‹œì„¤** | - **ì—­ì„¸ê¶Œ:** ì§€í•˜ì² ì—­ ê±°ë¦¬ (ë„ë³´ 5ë¶„/10ë¶„)<br>- **ê³µê³µì‹œì„¤:** ì‹œì²­, í•™êµ ë“±ê³¼ì˜ ê±°ë¦¬<br>- **í˜ì˜¤ì‹œì„¤:** ì“°ë ˆê¸°ì¥, ë¬˜ì§€ ë“± ì ‘ê·¼ì„± (ê°ê°€ìš”ì¸) |
        | **í™˜ê²½ì¡°ê±´** | **ìì—°/ë¬¼ë¦¬ì  í™˜ê²½** | - **ê³ ì €:** í‰ì§€, ì™„ê²½ì‚¬, ê¸‰ê²½ì‚¬, ì €ì§€(ì¹¨ìˆ˜ìš°ë ¤)<br>- **í˜•ìƒ:** ì •ë°©í˜•(ë„¤ëª¨ë°˜ë“¯), ì¥ë°©í˜•, ë¶€ì •í˜•(ëª»ìƒê¹€)<br>- **ë°©ìœ„:** ë‚¨í–¥, ë™í–¥ ë“± (ì£¼ê±°ìš©ì—ì„œ ì¤‘ìš”) |
        | **íšì§€ì¡°ê±´** | **ì´ìš© ìƒíƒœ** | - **ë©´ì :** í‘œì¤€ì  ë©´ì  ëŒ€ë¹„ ê³¼ì†Œ/ê³¼ëŒ€ ì—¬ë¶€<br>- **ìš©ë„:** ë‚˜ì§€(ë¹ˆ ë•…), ê±´ë¶€ì§€(ê±´ë¬¼ ìˆìŒ) |
        | **í–‰ì •ì¡°ê±´** | **ê³µë²•ìƒ ì œí•œ** | - **ìš©ë„ì§€ì—­:** ì£¼ê±°/ìƒì—…/ê³µì—…/ë…¹ì§€ (ê±´íìœ¨/ìš©ì ë¥  ê²°ì •)<br>- **ì œí•œêµ¬ì—­:** ê°œë°œì œí•œêµ¬ì—­(Greenbelt), ë¬¸í™”ì¬ë³´í˜¸êµ¬ì—­ |
        """, unsafe_allow_html=True)
        st.warning("âš ï¸ **ë¹„êµí‘œì¤€ì§€ ì„ ì • ì‹œ:** ìš©ë„ì§€ì—­ê³¼ ì´ìš©ìƒí™©ì´ ë™ì¼/ìœ ì‚¬í•œ ê²ƒì„ ì„ ì •í•˜ëŠ” ê²ƒì´ ì œ1ì›ì¹™ì…ë‹ˆë‹¤.")

    # --------------------------------------------------------------------------
    # Tab 2: ê±´ë¬¼ (ì›ê°€ë²•)
    # --------------------------------------------------------------------------
    with tab2:
        st.subheader("ğŸ—ï¸ ê±´ë¬¼ í‰ê°€ ì‹œ ê³ ë ¤ ìš”ì¸")
        st.info("ê±´ë¬¼ì€ 'ì¬ì¡°ë‹¬ì›ê°€'ì™€ 'ê°ê°€ìˆ˜ì •(ìƒíƒœ)'ì„ íŒŒì•…í•˜ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.")
        
        st.markdown("""
        | êµ¬ë¶„ | ì£¼ìš” í™•ì¸ ì‚¬í•­ | ì„¸ë¶€ ë‚´ìš© |
        | :--- | :--- | :--- |
        | **êµ¬ì¡°/ìš©ë„** | **ë‚´êµ¬ì—°í•œ ê²°ì •** | - **êµ¬ì¡°:** ì² ê·¼ì½˜í¬ë¦¬íŠ¸(RC), ì² ê³¨ì¡°, ì¡°ì ì¡°(ë²½ëŒ), ëª©ì¡°<br>- **ìš©ë„:** ì£¼ê±°ìš©, ìƒì—…ìš©, ê³µì—…ìš© (ë‚´ìš©ì—°ìˆ˜ê°€ ë‹¤ë¦„) |
        | **ì‹œê³µìƒíƒœ** | **ë§ˆê° ë° í’ˆì§ˆ** | - **ì™¸ë¶€ë§ˆê°:** ì„ì¬, íƒ€ì¼, í˜ì¸íŠ¸, ìœ ë¦¬ì»¤íŠ¼ì›”<br>- **ë‚´ë¶€ë§ˆê°:** ë°”ë‹¥ì¬, ì²œì¥ì¬, ì¸í…Œë¦¬ì–´ ìˆ˜ì¤€ |
        | **ì„¤ë¹„ë‚´ì—­** | **ë¶€ëŒ€ì„¤ë¹„** | - **ìœ„ìƒì„¤ë¹„:** ê¸‰ë°°ìˆ˜, í™”ì¥ì‹¤ ìƒíƒœ<br>- **ëƒ‰ë‚œë°©:** ì¤‘ì•™ê³µê¸‰ vs ê°œë³„ë‚œë°©, ì‹œìŠ¤í…œì—ì–´ì»¨ ìœ ë¬´<br>- **ê¸°íƒ€:** ìŠ¹ê°•ê¸°(E/V), ì†Œí™”ì „, í™ˆì˜¤í† ë©”ì´ì…˜ |
        | **ê´€ë¦¬ìƒíƒœ** | **ê°ê°€ìˆ˜ì • (ê´€ì°°)** | - **ë¬¼ë¦¬ì  ê°ê°€:** ê· ì—´, ëˆ„ìˆ˜, íŒŒì†, ë…¸í›„í™” ì •ë„<br>- **ê¸°ëŠ¥ì  ê°ê°€:** êµ¬ì‹ í‰ë©´ì„¤ê³„, ì£¼ì°¨ì¥ í˜‘ì†Œ, E/V ë¶€ì¡±<br>- **ê²½ì œì  ê°ê°€:** ì¸ê·¼ ìƒê¶Œ ì‡ í‡´, ê±´ë¬¼ê³¼ ë¶€ì§€ì˜ ë¶€ì í•© |
        | **ë¶€ëŒ€ê±´ë¬¼** | **ì¢…ë¬¼/ë¶€í•©ë¬¼** | - ì°½ê³ , ì°¨ê³ , ë‹´ì¥, ëŒ€ë¬¸ ë“±ì˜ í¬í•¨ í‰ê°€ ì—¬ë¶€ |
        """, unsafe_allow_html=True)

    # --------------------------------------------------------------------------
    # Tab 3: ì§‘í•©ê±´ë¬¼ (ê±°ë˜ì‚¬ë¡€ë¹„êµë²•)
    # --------------------------------------------------------------------------
    with tab3:
        st.subheader("ğŸ¢ ì•„íŒŒíŠ¸/ì˜¤í”¼ìŠ¤í…” í‰ê°€ ì‹œ ê³ ë ¤ ìš”ì¸")
        st.info("ê±°ë˜ì‚¬ë¡€ë¹„êµë²• ì ìš© ì‹œ 'ì‚¬ë¡€ì™€ì˜ ê²©ì°¨'ë¥¼ ë³´ì •í•˜ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.")
        
        st.markdown("""
        | êµ¬ë¶„ | ì£¼ìš” í™•ì¸ ì‚¬í•­ (ê²©ì°¨ìœ¨) | ì„¸ë¶€ ë‚´ìš© |
        | :--- | :--- | :--- |
        | **ì¸µë³„íš¨ìš©** | **ì¸µìˆ˜ì— ë”°ë¥¸ ê°€ê²©ì°¨** | - **ë¡œì–„ì¸µ:** ì¡°ë§/ì¼ì¡°ê°€ ì¢‹ì€ ì¤‘ìƒì¸µë¶€ (ê¸°ì¤€ 100)<br>- **ì €ì¸µ:** 1ì¸µ(ì‚¬ìƒí™œ), 2~3ì¸µ (ê°ê°€ ìš”ì¸)<br>- **íƒ‘ì¸µ:** ì˜¥ìƒ ëˆ„ìˆ˜ ìš°ë ¤ vs ì¸µê°„ì†ŒìŒ ì—†ìŒ (ì„ í˜¸ë„ ê°ˆë¦¼) |
        | **í˜¸ë³„íš¨ìš©** | **ë¼ì¸/ìœ„ì¹˜** | - **í–¥:** ë‚¨í–¥ > ë‚¨ë™/ë‚¨ì„œ > ë™í–¥ > ì„œí–¥ > ë¶í–¥<br>- **ìœ„ì¹˜:** ì—˜ë¦¬ë² ì´í„° ì¸ì ‘ ì†ŒìŒ, ë³µë„ì‹ vs ê³„ë‹¨ì‹ |
        | **ë‹¨ì§€íŠ¹ì„±** | **ë¸Œëœë“œ/ê·œëª¨** | - **ë¸Œëœë“œ:** 1êµ° ê±´ì„¤ì‚¬ vs ì¤‘ì†Œ ê±´ì„¤ì‚¬<br>- **ì„¸ëŒ€ìˆ˜:** ëŒ€ë‹¨ì§€(1000ì„¸ëŒ€â†‘)ê°€ ì»¤ë®¤ë‹ˆí‹°/ê´€ë¦¬ë¹„ ìœ ë¦¬<br>- **ì£¼ì°¨:** ì„¸ëŒ€ë‹¹ ì£¼ì°¨ëŒ€ìˆ˜, ì§€í•˜ì£¼ì°¨ì¥ ì—°ê²° ì—¬ë¶€ |
        | **ì…ì§€ì—¬ê±´** | **í•™êµ°/êµí†µ** | - **ì´ˆí’ˆì•„:** ì´ˆë“±í•™êµë¥¼ í’ˆì€ ì•„íŒŒíŠ¸ (ê°€ì¹˜ ìƒìŠ¹)<br>- **ì—­ì„¸ê¶Œ:** ì§€í•˜ì² ì—­ ë„ë³´ ê±°ë¦¬<br>- **í¸ì˜:** ëŒ€í˜•ë§ˆíŠ¸, ë°±í™”ì , ê³µì› ì¸ì ‘ì„± |
        """, unsafe_allow_html=True)
        st.warning("âš ï¸ **ì‹¤ë¬´ Tip:** ê°™ì€ ì•„íŒŒíŠ¸ ë‹¨ì§€ë¼ë„ 'ë™'ì˜ ìœ„ì¹˜(ë‹¨ì§€ ì…êµ¬, ë·°)ì— ë”°ë¼ ê°€ê²© ì°¨ì´ê°€ 10% ì´ìƒ ë‚˜ê¸°ë„ í•©ë‹ˆë‹¤.")

    # --------------------------------------------------------------------------
    # Tab 4: ì„ëŒ€ë£Œ ë° ë¬´í˜•ìì‚° (ìˆ˜ìµë°©ì‹)
    # --------------------------------------------------------------------------
    with tab4:
        st.subheader("ğŸ’° ì„ëŒ€ë£Œ ë° ê¶Œë¦¬ í‰ê°€ ì‹œ ê³ ë ¤ ìš”ì¸")
        
        col_r1, col_r2 = st.columns(2)
        
        with col_r1:
            st.markdown("**1. ì„ëŒ€ë£Œ í‰ê°€ (ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•)**")
            st.markdown("""
            * **ê³„ì•½ ë‚´ìš©:** ë³´ì¦ê¸ˆ/ì›”ì„¸ ë¹„ìœ¨, ì „ì„¸ ì „í™˜ìœ¨, ê³„ì•½ ê¸°ê°„
            * **ì„ëŒ€ ì¡°ê±´:** ê´€ë¦¬ë¹„ í¬í•¨ ë‚´ì—­(ì²­ì†Œ/ê²½ë¹„/ê³µê³¼ê¸ˆ)
            * **ì¸µë³„ íš¨ìš©:** 1ì¸µ(ì ‘ê·¼ì„± ìµœê³ ) vs 2ì¸µ ì´ìƒ(ê¸‰ê²©í•œ ê°ê°€)
            * **ì „ìš©ë¥ :** ì‹¤ì œ ì“¸ ìˆ˜ ìˆëŠ” ë©´ì  ë¹„ìœ¨
            """)
            
        with col_r2:
            st.markdown("**2. ì˜ì—…ê¶Œ/ê¸°ì—…ê°€ì¹˜ (ìˆ˜ìµí™˜ì›ë²•)**")
            st.markdown("""
            * **ìˆ˜ìµì„±:** ê³¼ê±° 3~5ë…„ ë§¤ì¶œì•¡ ë° ì˜ì—…ì´ìµ ì¶”ì´
            * **ì§€ì†ì„±:** ì´ˆê³¼ìˆ˜ìµì´ ì–¼ë§ˆë‚˜ ìœ ì§€ë  ê²ƒì¸ê°€ (ë²•ì  ë³´í˜¸ ë“±)
            * **ìœ„í—˜ì„±:** ê²½ìŸ ì—…ì²´ ì§„ì… ê°€ëŠ¥ì„±, ì‹œì¥ ë³€í™” (í• ì¸ìœ¨ ë°˜ì˜)
            * **ë¬´í˜•ìš”ì¸:** ë¸Œëœë“œ ì¸ì§€ë„, ê±°ë˜ì²˜ ê´€ê³„, íŠ¹í—ˆ ê¸°ìˆ 
            """)

    # --------------------------------------------------------------------------
    # Tab 5: ëª©ì ë³„ íŠ¹ì´ì‚¬í•­ (ë‹´ë³´/ê²½ë§¤/ë³´ìƒ)
    # --------------------------------------------------------------------------
    with tab5:
        st.subheader("âš–ï¸ í‰ê°€ ëª©ì ì— ë”°ë¥¸ íŠ¹ë³„ ê³ ë ¤ì‚¬í•­")
        st.markdown("ë™ì¼í•œ ë¬¼ê±´ì´ë¼ë„ **í‰ê°€ ëª©ì **ì— ë”°ë¼ ì¤‘ìš”í•˜ê²Œ ë³´ëŠ” í¬ì¸íŠ¸ê°€ ë‹¤ë¦…ë‹ˆë‹¤.", unsafe_allow_html=True)
        
        st.markdown("""
        | í‰ê°€ ëª©ì  | í•µì‹¬ ê³ ë ¤ì‚¬í•­ (Key Point) | í‰ê°€ ë°©í–¥ (Tendency) |
        | :--- | :--- | :--- |
        | **ë‹´ë³´ í‰ê°€**<br>(ì€í–‰ ëŒ€ì¶œ) | **í™˜ê°€ì„±(í˜„ê¸ˆí™”)**<br>- ê²½ë§¤ë¡œ ë„˜ì–´ê°”ì„ ë•Œ ì˜ íŒ”ë¦´ ë¬¼ê±´ì¸ê°€?<br>- ìœ ì¹˜ê¶Œ, ë²•ì •ì§€ìƒê¶Œ ë“± ê¶Œë¦¬í•˜ì ìœ ë¬´ | **ë³´ìˆ˜ì  í‰ê°€**<br>(ë–¼ì¼ ëˆ ê±±ì •) |
        | **ê²½ë§¤ í‰ê°€**<br>(ë²•ì›) | **ê¶Œë¦¬ë¶„ì„ & ì ìœ ê´€ê³„**<br>- ëŒ€í•­ë ¥ ìˆëŠ” ì„ì°¨ì¸, ë°€ë¦° ê´€ë¦¬ë¹„<br>- ê³µë¶€ìƒ ìš©ë„ì™€ í˜„í™© ìš©ë„ì˜ ì°¨ì´ (ìœ„ë°˜ê±´ì¶•ë¬¼) | **ì‹œì¥ê°€ì¹˜ í‰ê°€**<br>(ë‚™ì°° ì˜ˆìƒê°€ ì•„ë‹˜!) |
        | **ë³´ìƒ í‰ê°€**<br>(ìˆ˜ìš©) | **ê°ê´€ì  í˜„í™© & ê°œë°œì´ìµ ë°°ì œ**<br>- ë¶ˆë²•í˜•ì§ˆë³€ê²½ í† ì§€ëŠ” ë³€ê²½ ì „ ìƒíƒœë¡œ í‰ê°€<br>- ë¬´í—ˆê°€ê±´ì¶•ë¬¼ì€ ì ë²•í•  ë•Œë³´ë‹¤ ê°ì•¡ | **ì ì •ê°€ê²© í‰ê°€**<br>(ë²•ì  ê¸°ì¤€ ì¤€ìˆ˜) |
        | **ì¼ë°˜ ê±°ë˜**<br>(ë§¤ë§¤/ì‹œì„¸) | **ìµœìœ íš¨ì´ìš© & ì‹œì¥ì„ í˜¸ë„**<br>- í˜„ì¬ ê°€ì¥ ë¹„ì‹¸ê²Œ íŒ”ë¦´ ìˆ˜ ìˆëŠ” ì´ìš© ë°©ë²•<br>- ì¸í…Œë¦¬ì–´, ë·°, ë¡œì–„ì¸µ í”„ë¦¬ë¯¸ì—„ ì ê·¹ ë°˜ì˜ | **ì‹œì¥ê°€ì¹˜ í‰ê°€**<br>(ì‹¤ê±°ë˜ê°€ ê·¼ì ‘) |
        """, unsafe_allow_html=True)
        
        st.error("""
        **ğŸ›‘ í•„ìˆ˜ ì²´í¬ (íŠ¹ìˆ˜ ì¡°ê±´):**
        * **ë§¹ì§€(ë„ë¡œ ì—†ìŒ):** ì¸ì ‘ í† ì§€ í•©ë³‘ ì—†ì´ëŠ” ê±´ì¶• ë¶ˆê°€ â†’ ê°ê°€ìœ¨ 30% ì´ìƒ ì ìš©.
        * **ì™„ì¶©ë…¹ì§€/ì ‘ë„êµ¬ì—­:** ê±´ì¶• í–‰ìœ„ ì œí•œ â†’ í† ì§€ ê°€ì¹˜ ê¸‰ë½.
        * **ë²•ì •ì§€ìƒê¶Œ ì„±ë¦½ì—¬ë¶€:** í† ì§€ ì‚¬ìš©ì— ì œí•œì´ ê±¸ë¦¼ â†’ í† ì§€ ê°€ì¹˜ í•˜ë½.
        """)
# ==============================================================================
# 12. ê°ì •í‰ê°€ì— ê´€í•œ ê·œì¹™ (PDF ì›ë¬¸ ê¸°ë°˜ ì •ë³¸)
# ==============================================================================
elif menu == "ğŸ“œ ê´€ë ¨ ë²•ë ¹ (ê°ì •í‰ê°€ë²•/ê°ì¹™)":
    st.header("â­ ê°ì •í‰ê°€ì— ê´€í•œ ê·œì¹™")
    st.markdown("êµ­í† êµí†µë¶€ë ¹ ì œ1253í˜¸ (2023. 9. 14. ì¼ë¶€ê°œì •) | [ğŸ”— êµ­ê°€ë²•ë ¹ì •ë³´ì„¼í„° ì›ë¬¸ ë³´ê¸°](https://www.law.go.kr/ë²•ë ¹/ê°ì •í‰ê°€ì—ê´€í•œê·œì¹™)")
    st.caption("â€» ì—…ë¡œë“œí•´ì£¼ì‹  PDF íŒŒì¼ ë‚´ìš© ê·¸ëŒ€ë¡œ, ì œ1ì¡°ë¶€í„° ì œ29ì¡°ê¹Œì§€ì˜ í˜„í–‰ ì¡°ë¬¸ì„ ìˆ˜ë¡í–ˆìŠµë‹ˆë‹¤.")

    # íƒ­ êµ¬ì„±: ì´ì¹™ / ì›ì¹™&ì ˆì°¨ / ë¶€ë™ì‚° / ë™ì‚°&ê¸°íƒ€ / ë³´ì¹™
    tab1, tab2, tab3, tab4, tab5 = st.tabs(["ì œ1ì¥ ì´ì¹™", "ì œ2ì¥/3ì¥ ì›ì¹™&ì ˆì°¨", "ì œ4ì¥ ë¬¼ê±´ë³„(ë¶€ë™ì‚°)", "ì œ4ì¥ ë¬¼ê±´ë³„(ë™ì‚°ë“±)", "ë³´ì¹™/ê¸°íƒ€"])

    # --------------------------------------------------------------------------
    # Tab 1: ì œ1ì¥ ì´ì¹™ (ì œ1ì¡° ~ ì œ4ì¡°)
    # --------------------------------------------------------------------------
    with tab1:
        st.subheader("ì œ1ì¥ ì´ì¹™")
        
        with st.expander("ì œ1ì¡° (ëª©ì )"):
            st.write("ì´ ê·œì¹™ì€ ã€Œê°ì •í‰ê°€ ë° ê°ì •í‰ê°€ì‚¬ì— ê´€í•œ ë²•ë¥ ã€ ì œ3ì¡°ì œ3í•­ì— ë”°ë¼ ê°ì •í‰ê°€ë²•ì¸ë“±ì´ ê°ì •í‰ê°€ë¥¼ í•  ë•Œ ì¤€ìˆ˜í•´ì•¼ í•  ì›ì¹™ê³¼ ê¸°ì¤€ì„ ê·œì •í•¨ì„ ëª©ì ìœ¼ë¡œ í•œë‹¤.")

        with st.expander("ì œ2ì¡° (ì •ì˜) â­"):
            st.markdown("""
            1. **"ì‹œì¥ê°€ì¹˜"**: í†µìƒì ì¸ ì‹œì¥, ì •í†µí•œ ë‹¹ì‚¬ì, ì‹ ì¤‘í•˜ê³  ìë°œì ì¸ ê±°ë˜ ê°€ëŠ¥ì„±ì´ ê°€ì¥ ë†’ì€ ê°€ì•¡
            2. **"ê¸°ì¤€ì‹œì "**: ê°ì •í‰ê°€ì•¡ì„ ê²°ì •í•˜ëŠ” ê¸°ì¤€ì´ ë˜ëŠ” ë‚ ì§œ
            3. **"ê¸°ì¤€ê°€ì¹˜"**: ê°ì •í‰ê°€ì˜ ê¸°ì¤€ì´ ë˜ëŠ” ê°€ì¹˜
            4. **"ê°€ì¹˜í˜•ì„±ìš”ì¸"**: ê²½ì œì  ê°€ì¹˜ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì¼ë°˜ìš”ì¸, ì§€ì—­ìš”ì¸ ë° ê°œë³„ìš”ì¸
            5. **"ì›ê°€ë²•"**: ì¬ì¡°ë‹¬ì›ê°€ - ê°ê°€ìˆ˜ì •
            6. **"ì ì‚°ë²•"**: (ê¸°ì´ˆê°€ì•¡ Ã— ê¸°ëŒ€ì´ìœ¨) + í•„ìš”ì œê²½ë¹„ = ì„ëŒ€ë£Œ
            7. **"ê±°ë˜ì‚¬ë¡€ë¹„êµë²•"**: ì‚¬ë¡€ Ã— ì‚¬ì • Ã— ì‹œì  Ã— ê°€ì¹˜í˜•ì„±ìš”ì¸
            8. **"ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•"**: ì„ëŒ€ì‚¬ë¡€ Ã— ì‚¬ì • Ã— ì‹œì  Ã— ê°€ì¹˜í˜•ì„±ìš”ì¸ = ì„ëŒ€ë£Œ
            9. **"ê³µì‹œì§€ê°€ê¸°ì¤€ë²•"**: í‘œì¤€ì§€ Ã— ì‹œì  Ã— ì§€ Ã— ê°œ Ã— ê·¸ ë°–ì˜ ìš”ì¸
            10. **"ìˆ˜ìµí™˜ì›ë²•"**: ìˆœìˆ˜ìµ Ã· í™˜ì›ì´ìœ¨ (ë˜ëŠ” í˜„ê¸ˆíë¦„ í• ì¸)
            11. **"ìˆ˜ìµë¶„ì„ë²•"**: (ì´ìˆ˜ìµ ë¶„ì„ â†’ ìˆœìˆ˜ìµ) + í•„ìš”ì œê²½ë¹„ = ì„ëŒ€ë£Œ
            12. **"ê°ê°€ìˆ˜ì •"**: ì¬ì¡°ë‹¬ì›ê°€ ê°ì•¡(ë¬¼ë¦¬/ê¸°ëŠ¥/ê²½ì œì  ê°ê°€)
            12ì˜2. **"ì ì •í•œ ì‹¤ê±°ë˜ê°€"**: ë„ì‹œ 3ë…„/ë¹„ë„ì‹œ 5ë…„ ì´ë‚´ ì‹ ê³ ëœ ì‹¤ì œ ê±°ë˜ê°€ê²©
            13. **"ì¸ê·¼ì§€ì—­"**: ëŒ€ìƒë¶€ë™ì‚°ì´ ì†í•œ ì§€ì—­, ì´ìš© ë™ì§ˆì , ì§€ì—­ìš”ì¸ ê³µìœ 
            14. **"ìœ ì‚¬ì§€ì—­"**: ì¸ê·¼ì§€ì—­ê³¼ ìœ ì‚¬í•œ íŠ¹ì„±ì„ ê°–ëŠ” ì§€ì—­
            15. **"ë™ì¼ìˆ˜ê¸‰ê¶Œ"**: ëŒ€ì²´ ê²½ìŸ ê´€ê³„ ì„±ë¦½ ê¶Œì—­ (ì¸ê·¼+ìœ ì‚¬ í¬í•¨)
            """)

        with st.expander("ì œ3ì¡° (ê°ì •í‰ê°€ë²•ì¸ë“±ì˜ ì˜ë¬´)"):
            st.write("ê°ì •í‰ê°€ë²•ì¸ë“±ì€ ë‹¤ìŒ ê° í˜¸ì˜ ì–´ëŠ í•˜ë‚˜ì— í•´ë‹¹í•˜ëŠ” ê²½ìš°ì—ëŠ” ê°ì •í‰ê°€ë¥¼ í•´ì„œëŠ” ì•ˆ ëœë‹¤.")
            st.write("1. ìì‹ ì˜ ëŠ¥ë ¥ìœ¼ë¡œ ì—…ë¬´ìˆ˜í–‰ì´ ë¶ˆê°€ëŠ¥í•˜ê±°ë‚˜ ë§¤ìš° ê³¤ë€í•œ ê²½ìš°")
            st.write("2. ì´í•´ê´€ê³„ ë“±ì˜ ì´ìœ ë¡œ ìê¸°ê°€ ê°ì •í‰ê°€í•˜ëŠ” ê²ƒì´ íƒ€ë‹¹í•˜ì§€ ì•Šë‹¤ê³  ì¸ì •ë˜ëŠ” ê²½ìš°")

        with st.expander("ì œ4ì¡° (ì ìš©ë²”ìœ„)"):
            st.write("ê°ì •í‰ê°€ë²•ì¸ë“±ì€ ë‹¤ë¥¸ ë²•ë ¹ì— íŠ¹ë³„í•œ ê·œì •ì´ ìˆëŠ” ê²½ìš°ë¥¼ ì œì™¸í•˜ê³ ëŠ” ì´ ê·œì¹™ìœ¼ë¡œ ì •í•˜ëŠ” ë°”ì— ë”°ë¼ ê°ì •í‰ê°€í•´ì•¼ í•œë‹¤.")

    # --------------------------------------------------------------------------
    # Tab 2: ì œ2ì¥/3ì¥ ì›ì¹™ ë° ì ˆì°¨ (ì œ5ì¡° ~ ì œ13ì¡°ì˜2)
    # --------------------------------------------------------------------------
    with tab2:
        st.subheader("ì œ2ì¥ ê°ì •í‰ê°€ì˜ ê¸°ì´ˆ / ì œ3ì¥ ê°ì •í‰ê°€ ë°©ì‹")

        with st.expander("ì œ5ì¡° (ì‹œì¥ê°€ì¹˜ê¸°ì¤€ ì›ì¹™)"):
            st.write("â‘  ëŒ€ìƒë¬¼ê±´ì— ëŒ€í•œ ê°ì •í‰ê°€ì•¡ì€ **ì‹œì¥ê°€ì¹˜**ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²°ì •í•œë‹¤.")
            st.write("â‘¡ ì˜ˆì™¸(ë²•ë ¹/ì˜ë¢°ì¸ ìš”ì²­/ì‚¬íšŒí†µë…ìƒ í•„ìš”) ì‹œ ì‹œì¥ê°€ì¹˜ ì™¸ì˜ ê°€ì¹˜ ê¸°ì¤€ ê°€ëŠ¥.")
            st.write("â‘¢ ì‹œì¥ê°€ì¹˜ ì™¸ ê°€ì¹˜ ê¸°ì¤€ ì‹œ ì„±ê²©, íŠ¹ì§•, í•©ë¦¬ì„± ë° ì ë²•ì„±ì„ ê²€í† í•´ì•¼ í•œë‹¤.")
            st.write("â‘£ í•©ë¦¬ì„±/ì ë²•ì„± ê²°ì—¬ ì‹œ ì˜ë¢° ê±°ë¶€ë‚˜ ìˆ˜ì„ ì² íšŒ ê°€ëŠ¥.")

        with st.expander("ì œ6ì¡° (í˜„í™©ê¸°ì¤€ ì›ì¹™)"):
            st.write("â‘  ê¸°ì¤€ì‹œì ì—ì„œì˜ ì´ìš©ìƒí™©(ë¶ˆë²•/ì¼ì‹œì  ì œì™¸) ë° ê³µë²•ìƒ ì œí•œ ìƒíƒœ ê¸°ì¤€.")
            st.write("â‘¡ ì˜ˆì™¸(ë²•ë ¹/ì˜ë¢°ì¸/ì‚¬íšŒí†µë…) ì‹œ **ê°ì •í‰ê°€ì¡°ê±´**ì„ ë¶™ì¼ ìˆ˜ ìˆë‹¤.")
            st.write("â‘¢ ì¡°ê±´ì˜ í•©ë¦¬ì„±, ì ë²•ì„±, ì‹¤í˜„ê°€ëŠ¥ì„±ì„ ê²€í† í•´ì•¼ í•œë‹¤.")

        with st.expander("ì œ7ì¡° (ê°œë³„ë¬¼ê±´ê¸°ì¤€ ì›ì¹™ ë“±)"):
            st.write("â‘  ê°œë³„í‰ê°€ (ì›ì¹™)")
            st.write("â‘¡ ì¼ê´„í‰ê°€ (ì¼ì²´ ê±°ë˜ / ìš©ë„ìƒ ë¶ˆê°€ë¶„)")
            st.write("â‘¢ êµ¬ë¶„í‰ê°€ (ê°€ì¹˜ ë‹¬ë¦¬í•˜ëŠ” ë¶€ë¶„)")
            st.write("â‘£ ë¶€ë¶„í‰ê°€ (ì¼ë¶€ë¶„ íŠ¹ìˆ˜ëª©ì /í•©ë¦¬ì  ì´ìœ )")

        with st.expander("ì œ8ì¡° (ê°ì •í‰ê°€ì˜ ì ˆì°¨)"):
            st.write("1.ê¸°ë³¸ì ì‚¬í•­ í™•ì • â†’ 2.ì²˜ë¦¬ê³„íš â†’ 3.ëŒ€ìƒë¬¼ê±´ í™•ì¸ â†’ 4.ìë£Œìˆ˜ì§‘ â†’ 5.ìë£Œê²€í†  â†’ 6.ë°©ë²•ì„ ì • â†’ 7.ê°€ì•¡ê²°ì •")

        with st.expander("ì œ9ì¡° (ê¸°ë³¸ì  ì‚¬í•­ì˜ í™•ì •)"):
            st.write("ì˜ë¢°ì¸, ëŒ€ìƒë¬¼ê±´, ëª©ì , ê¸°ì¤€ì‹œì (ê°€ê²©ì¡°ì‚¬ ì™„ë£Œì¼ ì›ì¹™), ì¡°ê±´, ê¸°ì¤€ê°€ì¹˜, ìë¬¸ë“±, ìˆ˜ìˆ˜ë£Œ ë“±ì„ í™•ì •í•´ì•¼ í•œë‹¤.")

        with st.expander("ì œ10ì¡° (ëŒ€ìƒë¬¼ê±´ì˜ í™•ì¸)"):
            st.write("â‘  **ì‹¤ì§€ì¡°ì‚¬**ë¥¼ í•˜ì—¬ì•¼ í•œë‹¤.")
            st.write("â‘¡ ì˜ˆì™¸: ì²œì¬ì§€ë³€, ê²©ì§€, ê°ê´€ì  ìë£Œ ì¶©ë¶„ ë“± ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê²½ìš° ìƒëµ ê°€ëŠ¥.")

        with st.expander("ì œ11ì¡° (ê°ì •í‰ê°€ë°©ì‹)"):
            st.write("1. ì›ê°€ë°©ì‹ (ë¹„ìš©ì„±)")
            st.write("2. ë¹„êµë°©ì‹ (ì‹œì¥ì„±)")
            st.write("3. ìˆ˜ìµë°©ì‹ (ìˆ˜ìµì„±)")

        with st.expander("ì œ12ì¡° (ê°ì •í‰ê°€ë°©ë²•ì˜ ì ìš© ë° ì‹œì‚°ê°€ì•¡ ì¡°ì •)"):
            st.write("â‘  ì£¼ëœ ë°©ë²•ì„ ì ìš©í•´ì•¼ í•œë‹¤.")
            st.write("â‘¡ ì£¼ëœ ë°©ë²•ì˜ ì‹œì‚°ê°€ì•¡ì„ ë‹¤ë¥¸ ë°©ë²•(ê³µì‹œì§€ê°€ë²• vs ê±°ë˜ì‚¬ë¡€ë²•ì€ ì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë´„)ê³¼ ë¹„êµí•˜ì—¬ **í•©ë¦¬ì„±ì„ ê²€í† **í•´ì•¼ í•œë‹¤.")
            st.write("â‘¢ í•©ë¦¬ì„±ì´ ì—†ìœ¼ë©´ ì‹œì‚°ê°€ì•¡ì„ **ì¡°ì •**í•˜ì—¬ ê²°ì •í•  ìˆ˜ ìˆë‹¤.")

        with st.expander("ì œ13ì¡° (ê°ì •í‰ê°€ì„œ ì‘ì„±)"):
            st.write("ëª…í™•í•˜ê³  ì¼ê´€ì„± ìˆê²Œ ì‘ì„±. í•„ìˆ˜ ê¸°ì¬ì‚¬í•­ í¬í•¨(ì‚°ì¶œê·¼ê±°, ê²°ì •ì˜ê²¬ ë“±).")

        with st.expander("ì œ13ì¡°ì˜2 (ì „ìë¬¸ì„œ ê°ì •í‰ê°€ì„œ)"):
            st.write("ì „ìì„œëª…, ìœ„ë³€ì¡° ë°©ì§€ ì¡°ì¹˜ ë“±ì„ ê±°ì³ ì „ìë¬¸ì„œ ë°œê¸‰ ê°€ëŠ¥.")

    # --------------------------------------------------------------------------
    # Tab 3: ì œ4ì¥ ë¬¼ê±´ë³„ í‰ê°€ - ë¶€ë™ì‚° (ì œ14ì¡° ~ ì œ19ì¡°)
    # --------------------------------------------------------------------------
    with tab3:
        st.subheader("ì œ4ì¥ ë¬¼ê±´ë³„ ê°ì •í‰ê°€ (ë¶€ë™ì‚°)")

        with st.expander("ì œ14ì¡° (í† ì§€ì˜ ê°ì •í‰ê°€) â­"):
            st.info("ì›ì¹™: ê³µì‹œì§€ê°€ê¸°ì¤€ë²•")
            st.write("â‘  **ê³µì‹œì§€ê°€ê¸°ì¤€ë²•** ì ìš© (í‘œì¤€ì§€ ì„ ì • â†’ ì‹œì ìˆ˜ì • â†’ ì§€/ê°œ ë¹„êµ â†’ ê·¸ ë°–ì˜ ìš”ì¸ ë³´ì •)")
            st.write("â‘¢ ì ì •í•œ ì‹¤ê±°ë˜ê°€ê°€ ìˆëŠ” ê²½ìš° **ê±°ë˜ì‚¬ë¡€ë¹„êµë²•** ì ìš© ê°€ëŠ¥")
            st.write("â‘£ ì„ëŒ€ë£Œ, ì¡°ì„±ë¹„ìš© ë“±ì„ ê³ ë ¤í•  ìˆ˜ ìˆë‹¤.")

        with st.expander("ì œ15ì¡° (ê±´ë¬¼ì˜ ê°ì •í‰ê°€)"):
            st.info("ì›ì¹™: ì›ê°€ë²•")
            st.write("ê°ê°€ìˆ˜ì •: ë¬¼ë¦¬/ê¸°ëŠ¥/ê²½ì œì  ê°ê°€ ê³ ë ¤.")

        with st.expander("ì œ16ì¡° (í† ì§€ì™€ ê±´ë¬¼ì˜ ì¼ê´„ê°ì •í‰ê°€)"):
            st.info("ì›ì¹™: ê±°ë˜ì‚¬ë¡€ë¹„êµë²•")
            st.write("ì§‘í•©ê±´ë¬¼(ì•„íŒŒíŠ¸) ë˜ëŠ” í† ì§€/ê±´ë¬¼ ì¼ê´„ ê±°ë˜ ì‹œ ì ìš©. ê°€ì•¡ì„ êµ¬ë¶„ í‘œì‹œí•  ìˆ˜ ìˆë‹¤.")

        with st.expander("ì œ17ì¡° (ì‚°ë¦¼ì˜ ê°ì •í‰ê°€)"):
            st.write("â‘  ì‚°ì§€ì™€ ì…ëª© êµ¬ë¶„ í‰ê°€ (ì›ì¹™)")
            st.write("â‘¡ **ì…ëª©**: ê±°ë˜ì‚¬ë¡€ë¹„êµë²• (ì†Œê²½ëª©ë¦¼: ì›ê°€ë²• ê°€ëŠ¥)")
            st.write("â‘¢ **ì‚°ì§€**: ê³µì‹œì§€ê°€ê¸°ì¤€ë²•")
            st.write("â‘¡ **ì¼ê´„**: ê±°ë˜ì‚¬ë¡€ë¹„êµë²•")

        with st.expander("ì œ18ì¡° (ê³¼ìˆ˜ì›ì˜ ê°ì •í‰ê°€)"):
            st.info("ì›ì¹™: ê±°ë˜ì‚¬ë¡€ë¹„êµë²•")

        with st.expander("ì œ19ì¡° (ê³µì¥ì¬ë‹¨ ë° ê´‘ì—…ì¬ë‹¨ì˜ ê°ì •í‰ê°€)"):
            st.write("â‘  **ê³µì¥ì¬ë‹¨**: ê°œë³„ ë¬¼ê±´ í•©ì‚° (ê³„ì† ìˆ˜ìµ ì‹œ ìˆ˜ìµí™˜ì›ë²• ê°€ëŠ¥)")
            st.write("â‘¡ **ê´‘ì—…ì¬ë‹¨**: ìˆ˜ìµí™˜ì›ë²•")

    # --------------------------------------------------------------------------
    # Tab 4: ì œ4ì¥ ë¬¼ê±´ë³„ í‰ê°€ - ë™ì‚° ë“± (ì œ20ì¡° ~ ì œ26ì¡°)
    # --------------------------------------------------------------------------
    with tab4:
        st.subheader("ì œ4ì¥ ë¬¼ê±´ë³„ ê°ì •í‰ê°€ (ë™ì‚°/ê¸°íƒ€)")

        with st.expander("ì œ20ì¡° (ìë™ì°¨ ë“±ì˜ ê°ì •í‰ê°€)"):
            st.write("1. **ìë™ì°¨**: ê±°ë˜ì‚¬ë¡€ë¹„êµë²•")
            st.write("2. **ê±´ì„¤ê¸°ê³„**: ì›ê°€ë²•")
            st.write("3. **ì„ ë°•**: ì›ê°€ë²• (ì„ ì²´/ê¸°ê´€/ì˜ì¥ êµ¬ë¶„)")
            st.write("4. **í•­ê³µê¸°**: ì›ê°€ë²•")
            st.write("â€» íš¨ìš©ê°€ì¹˜ ì—†ëŠ” ê²½ìš°: í•´ì²´ì²˜ë¶„ê°€ì•¡")

        with st.expander("ì œ21ì¡° (ë™ì‚°ì˜ ê°ì •í‰ê°€)"):
            st.info("ì›ì¹™: ê±°ë˜ì‚¬ë¡€ë¹„êµë²•")
            st.write("â‘¡ **ê¸°ê³„Â·ê¸°êµ¬ë¥˜**: ì›ê°€ë²• ì ìš© (2023.9.14. ì‹ ì„¤ ì¡°í•­)")

        with st.expander("ì œ22ì¡° (ì„ëŒ€ë£Œì˜ ê°ì •í‰ê°€)"):
            st.info("ì›ì¹™: ì„ëŒ€ì‚¬ë¡€ë¹„êµë²•")

        with st.expander("ì œ23ì¡° (ë¬´í˜•ìì‚°ì˜ ê°ì •í‰ê°€)"):
            st.info("ì›ì¹™: ìˆ˜ìµí™˜ì›ë²•")
            st.write("ê´‘ì—…ê¶Œ(ì‹œì„¤ì œì™¸), ì–´ì—…ê¶Œ(ì‹œì„¤ì œì™¸), ì˜ì—…ê¶Œ, ì§€ì‹ì¬ì‚°ê¶Œ ë“±")

        with st.expander("ì œ24ì¡° (ìœ ê°€ì¦ê¶Œ ë“±ì˜ ê°ì •í‰ê°€)"):
            st.write("1. **ì£¼ì‹**: ìƒì¥(ê±°ë˜ì‚¬ë¡€), ë¹„ìƒì¥(ê¸°ì—…ê°€ì¹˜/ìì‚°ê°€ì¹˜ ê³ ë ¤)")
            st.write("2. **ì±„ê¶Œ**: ìƒì¥(ê±°ë˜ì‚¬ë¡€), ë¹„ìƒì¥(ìˆ˜ìµí™˜ì›ë²•)")
            st.write("3. **ê¸°ì—…ê°€ì¹˜**: ìˆ˜ìµí™˜ì›ë²•")

        with st.expander("ì œ25ì¡° (ì†ŒìŒ ë“±ìœ¼ë¡œ ì¸í•œ ê°€ì¹˜í•˜ë½ë¶„)"):
            st.write("ì†ŒìŒ, ì§„ë™, ì¼ì¡°ì¹¨í•´, í™˜ê²½ì˜¤ì—¼ ë“±: ì›ìƒíšŒë³µë¹„ìš© ê³ ë ¤")

        with st.expander("ì œ26ì¡° (ê·¸ ë°–ì˜ ë¬¼ê±´)"):
            st.write("ê·œì •ë˜ì§€ ì•Šì€ ë¬¼ê±´ì€ ë¹„ìŠ·í•œ ë¬¼ê±´ì´ë‚˜ ê¶Œë¦¬ì— ì¤€í•˜ì—¬ í‰ê°€")

    # --------------------------------------------------------------------------
    # Tab 5: ë³´ì¹™ ë° ê¸°íƒ€ (ì œ27ì¡° ~ ì œ29ì¡°)
    # --------------------------------------------------------------------------
    with tab5:
        st.subheader("ë³´ì¹™ ë° ê¸°íƒ€")

        with st.expander("ì œ27ì¡° (ì¡°ì–¸Â·ì •ë³´ ë“±ì˜ ì œê³µ)"):
            st.write("í† ì§€ë“±ì˜ ì´ìš©/ê°œë°œ ì¡°ì–¸Â·ì •ë³´ ì œê³µ ì‹œ í•©ë¦¬ì ì´ê³  ê°ê´€ì ì¸ ìë£Œì— ê·¼ê±°í•´ì•¼ í•œë‹¤.")

        with st.expander("ì œ28ì¡° (ê·¸ ë°–ì˜ ê°ì •í‰ê°€ ê¸°ì¤€)"):
            st.write("ì„¸ë¶€ì ì¸ ê¸°ì¤€ì€ êµ­í† êµí†µë¶€ì¥ê´€ì´ ì •í•˜ì—¬ ê³ ì‹œí•œë‹¤. (ì‹¤ë¬´ê¸°ì¤€ ë“±)")

        with st.expander("ì œ29ì¡° (ê·œì œì˜ ì¬ê²€í† )"):
            st.write("2024ë…„ 1ì›” 1ì¼ ê¸°ì¤€ ë§¤ 3ë…„ë§ˆë‹¤ íƒ€ë‹¹ì„±ì„ ê²€í† í•˜ì—¬ ê°œì„  ì¡°ì¹˜í•´ì•¼ í•œë‹¤.")
            
        st.divider()
        st.success("âœ… **[Verification]** ì—…ë¡œë“œí•˜ì‹  PDF(2023.9.14 ê°œì •) ë‚´ìš©ê³¼ 100% ì¼ì¹˜í•©ë‹ˆë‹¤.")
# ==============================================================================
# 13. ìš”ì¸ ë¹„êµ/ì‚°ì • (ê²©ì°¨ìœ¨ ê³„ì‚°ê¸°)
# ==============================================================================
elif menu == "ğŸ“Š ìš”ì¸ ë¹„êµ/ì‚°ì • (ê²©ì°¨ìœ¨)":
    st.header("ğŸ“Š ê°€ì¹˜í˜•ì„±ìš”ì¸ ë¹„êµ ë° ê²©ì°¨ìœ¨ ì‚°ì •")
    st.markdown("í‘œì¤€ì§€(ë˜ëŠ” ì‚¬ë¡€) ëŒ€ë¹„ ëŒ€ìƒë¬¼ê±´ì˜ ìš°ì„¸/ì—´ì„¸ë¥¼ ë¹„êµí•˜ì—¬ <b>ìµœì¢… ë°°ìœ¨(Ratio)</b>ì„ ì‚°ì¶œí•©ë‹ˆë‹¤.", unsafe_allow_html=True)

    tab1, tab2, tab3 = st.tabs(["ğŸ‘¤ ê°œë³„ìš”ì¸ (ìƒì„¸ë¹„êµ)", "ğŸ“ˆ ê·¸ ë°–ì˜ ìš”ì¸ (ì‹œì¥ë¶„ì„)", "ğŸŒ ì§€ì—­ìš”ì¸"])

    # --------------------------------------------------------------------------
    # Tab 1: ê°œë³„ìš”ì¸ (Individual Factors)
    # --------------------------------------------------------------------------
    with tab1:
        st.subheader("1. ê°œë³„ìš”ì¸ ë¹„êµì¹˜ ì‚°ì •")
        st.caption("í‘œì¤€ì§€(ì‚¬ë¡€)ë¥¼ **100**ìœ¼ë¡œ ë³´ì•˜ì„ ë•Œ, ëŒ€ìƒë¬¼ê±´ì˜ ì ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.")

        col_a, col_b = st.columns([1.5, 1])

        with col_a:
            st.markdown("##### ğŸ“ í•­ëª©ë³„ ë¹„êµ (í‘œì¤€ì§€ = 100)")
            
            # ìŠ¬ë¼ì´ë”ë¡œ ì§ê´€ì ì¸ ë¹„êµ (90~110 ë²”ìœ„ê°€ ê°€ì¥ ë¹ˆë²ˆ)
            f_street = st.slider("1. ê°€ë¡œì¡°ê±´ (ë„ë¡œ í­/ìƒíƒœ)", 50, 150, 100, help="ê´‘ëŒ€ë¡œ, ì†Œë¡œ, ë§¹ì§€ ë“± ë„ë¡œ ì—¬ê±´ ë¹„êµ")
            f_access = st.slider("2. ì ‘ê·¼ì¡°ê±´ (êµí†µ/ì—­ì„¸ê¶Œ)", 50, 150, 100, help="ì§€í•˜ì² ì—­ ê±°ë¦¬, ë²„ìŠ¤ì •ë¥˜ì¥, í¸ì˜ì‹œì„¤ ì ‘ê·¼ì„±")
            f_env = st.slider("3. í™˜ê²½ì¡°ê±´ (ìì—°/ë¬¼ë¦¬)", 50, 150, 100, help="í˜•ìƒ(ëª¨ì–‘), ê³ ì €(ê²½ì‚¬), ë°©ìœ„(í–¥), ì¹¨ìˆ˜ì—¬ë¶€")
            f_plan = st.slider("4. íšì§€ì¡°ê±´ (ì´ìš©ìƒíƒœ)", 50, 150, 100, help="ë©´ì ì˜ ì ì •ì„±, ì ‘ë©´ ë„ˆë¹„")
            f_admin = st.slider("5. í–‰ì •ì¡°ê±´ (ê·œì œ/ì œí•œ)", 50, 150, 100, help="ê±´íìœ¨/ìš©ì ë¥  ì œí•œ, ë„ì‹œê³„íšì‹œì„¤ ì €ì´‰ ì—¬ë¶€")
            f_other = st.slider("6. ê¸°íƒ€ì¡°ê±´ (ì¥ë˜ë™í–¥ ë“±)", 50, 150, 100)

        with col_b:
            st.markdown("##### ğŸ§® ì‚°ì • ê²°ê³¼")
            
            # ê°œë³„ìš”ì¸ = ê° í•­ëª© ë¹„ì˜ ê³± (ìƒìŠ¹ì‹)
            # 1.05 * 0.95 * ...
            
            r_street = f_street / 100
            r_access = f_access / 100
            r_env = f_env / 100
            r_plan = f_plan / 100
            r_admin = f_admin / 100
            r_other = f_other / 100
            
            total_ind_factor = r_street * r_access * r_env * r_plan * r_admin * r_other
            
            st.metric("ê°€ë¡œì¡°ê±´", f"{r_street:.3f}")
            st.metric("ì ‘ê·¼ì¡°ê±´", f"{r_access:.3f}")
            st.metric("í™˜ê²½ì¡°ê±´", f"{r_env:.3f}")
            st.write("...")
            
            st.divider()
            st.error(f"**ğŸ”¢ ìµœì¢… ê°œë³„ìš”ì¸:** {total_ind_factor:.4f}")
            
            st.info("""
            **[ì‚°ì‹]**
            (ê°€ë¡œ Ã— ì ‘ê·¼ Ã— í™˜ê²½ Ã— íšì§€ Ã— í–‰ì • Ã— ê¸°íƒ€)
            """)

    # --------------------------------------------------------------------------
    # Tab 2: ê·¸ ë°–ì˜ ìš”ì¸ (Other Factors)
    # --------------------------------------------------------------------------
    with tab2:
        st.subheader("2. ê·¸ ë°–ì˜ ìš”ì¸ ë³´ì •ì¹˜ ì‚°ì •")
        st.markdown("ì¸ê·¼ ì§€ì—­ì˜ **ë³´ìƒì„ ë¡€**ë‚˜ **ê²½ë§¤ë‚™ì°°ê°€ìœ¨**, **ì§€ê°€ë³€ë™ë¥  ê²©ì°¨** ë“±ì„ í†µí•´ ì‚°ì •í•©ë‹ˆë‹¤.")
        
        method = st.radio("ì‚°ì • ë°©ì‹ ì„ íƒ", ["ì§ì ‘ ì…ë ¥", "ê±°ë˜ì‚¬ë¡€(ì‹¤ê±°ë˜ê°€) ê¸°ì¤€ ì‚°ì •", "ì§€ê°€ë³€ë™ë¥  ê²©ì°¨ ê¸°ì¤€"])
        
        if method == "ì§ì ‘ ì…ë ¥":
            other_factor_input = st.number_input("ê·¸ ë°–ì˜ ìš”ì¸ ë³´ì •ì¹˜", value=1.000, step=0.01, format="%.3f")
            st.success(f"ì ìš©ì¹˜: **{other_factor_input}**")
            
        elif method == "ê±°ë˜ì‚¬ë¡€(ì‹¤ê±°ë˜ê°€) ê¸°ì¤€ ì‚°ì •":
            st.write("ë¹„ìŠ·í•œ ë¬¼ê±´ì´ 120ë§Œì›ì— ê±°ë˜ë˜ì—ˆëŠ”ë°, ê³µì‹œì§€ê°€ ê¸°ì¤€ìœ¼ë¡œëŠ” 100ë§Œì›ì´ë¼ë©´? â†’ 1.2ë°° ë³´ì •")
            col_o1, col_o2 = st.columns(2)
            with col_o1:
                market_price = st.number_input("ì¸ê·¼ ì •ìƒ ê±°ë˜ê°€ê²© (ë‹¨ê°€)", value=1200000)
            with col_o2:
                calc_price = st.number_input("ê³µì‹œì§€ê°€ ê¸°ì¤€ ì‚°ì •ê°€ì•¡ (ë‹¨ê°€)", value=1000000, help="ì‹œì ìˆ˜ì •, ì§€ì—­/ê°œë³„ìš”ì¸ë§Œ ë°˜ì˜í•œ ê°€ê²©")
            
            if calc_price > 0:
                calc_other = market_price / calc_price
                st.metric("ê³„ì‚°ëœ ê·¸ ë°–ì˜ ìš”ì¸", f"{calc_other:.4f}")
                st.caption(f"ì‹œì¥ê°€ì¹˜({market_price}) Ã· ì‚°ì •ê°€ì•¡({calc_price})")
            else:
                st.warning("ì‚°ì •ê°€ì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.")

        elif method == "ì§€ê°€ë³€ë™ë¥  ê²©ì°¨ ê¸°ì¤€":
            st.write("í•´ë‹¹ ì§€ì—­ ë•…ê°’ì´ í‰ê· ë³´ë‹¤ ì–¼ë§ˆë‚˜ ë” ë›°ì—ˆë‚˜?")
            col_o1, col_o2 = st.columns(2)
            with col_o1:
                target_rate = st.number_input("ëŒ€ìƒì§€ì—­ ì§€ê°€ë³€ë™ë¥  (%)", value=5.0)
            with col_o2:
                avg_rate = st.number_input("ì¸ê·¼ ì‹œ/êµ°/êµ¬ í‰ê·  ë³€ë™ë¥  (%)", value=3.0)
            
            # (1 + r1) / (1 + r2)
            calc_other = (1 + target_rate/100) / (1 + avg_rate/100)
            st.metric("ë³€ë™ë¥  ê²©ì°¨ ë°°ìœ¨", f"{calc_other:.4f}")

    # --------------------------------------------------------------------------
    # Tab 3: ì§€ì—­ìš”ì¸ (Regional Factors)
    # --------------------------------------------------------------------------
    with tab3:
        st.subheader("3. ì§€ì—­ìš”ì¸ ë¹„êµ")
        st.info("ëŒ€ìƒë¬¼ê±´ì´ ë¹„êµí‘œì¤€ì§€ì™€ **ì¸ê·¼ì§€ì—­(ë™ì¼ ìˆ˜ê¸‰ê¶Œ)**ì— ì†Œì¬í•˜ë©´ í†µìƒ **1.00**ì…ë‹ˆë‹¤.", unsafe_allow_html=True)
        
        is_same_region = st.checkbox("ë¹„êµí‘œì¤€ì§€ê°€ ëŒ€ìƒë¬¼ê±´ê³¼ 'ì¸ê·¼ì§€ì—­'ì— ìˆìŠµë‹ˆê¹Œ?", value=True)
        
        if is_same_region:
            reg_factor = 1.000
            st.success("âœ… ì§€ì—­ìš”ì¸: **1.000** (ë™ì¼ ì§€ì—­ì´ë¯€ë¡œ ë¹„êµ ë¶ˆí•„ìš”)")
        else:
            st.warning("ìœ ì‚¬ì§€ì—­(ë‹¤ë¥¸ ë™ë„¤)ì˜ í‘œì¤€ì§€ë¥¼ ê°€ì ¸ì™”ìœ¼ë¯€ë¡œ ì§€ì—­ ê²©ì°¨ë¥¼ ë¹„êµí•´ì•¼ í•©ë‹ˆë‹¤.")
            col_r1, col_r2 = st.columns(2)
            with col_r1:
                st.write("**í‘œì¤€ì§€ ì§€ì—­ (100)**")
                base_score = 100
            with col_r2:
                target_region_score = st.number_input("ëŒ€ìƒì§€ ì§€ì—­ ìš°ì„¸ë„ ì…ë ¥", value=105, help="ëŒ€ìƒ ì§€ì—­ì´ í‘œì¤€ì§€ ì§€ì—­ë³´ë‹¤ ìƒê¶Œ/í™˜ê²½ ë“±ì´ 5% ì¢‹ìœ¼ë©´ 105")
            
            reg_factor = target_region_score / base_score
            st.error(f"ğŸ”¢ ì‚°ì •ëœ ì§€ì—­ìš”ì¸: **{reg_factor:.3f}**")